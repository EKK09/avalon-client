{
  "entry": "server-bundle.js",
  "files": {
    "js/1.e18d1440.js": "exports.ids=[1],exports.modules={\"6a73\":function(e,t){e.exports={}},ab46:function(e,t,a){\"use strict\";a.r(t);var s=a(\"6a73\");for(var i in s)[\"default\"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i)},bda9:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-layout\",{attrs:{view:\"hHh lpR fFf\"}},[a(\"GameHeader\"),a(\"q-page-container\",[a(\"q-page\",{staticClass:\"bg-blue-grey-2\",attrs:{\"style-fn\":e.myTweak,padding:\"\"}},[a(\"PlayerList\"),a(\"GameDialog\"),a(\"GameConnectingDialog\"),a(\"LoginDialog\"),a(\"GameRoleDialog\",{ref:\"gameRoleDialog\"}),a(\"InviteDialog\",{ref:\"inviteDialog\"}),a(\"q-dialog\",{attrs:{persistent:\"\"},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:\"confirm\"}},[a(\"q-card\",{staticStyle:{\"min-width\":\"350px\"},attrs:{dark:\"\"}},[a(\"q-card-section\",{staticClass:\"text-h6 text-bold text-center\"},[e._v(\"\\n            確定離開遊戲 ?\\n          \")]),a(\"q-card-actions\",{attrs:{align:\"center\"}},[a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"取消\",color:\"primary\"}}),a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"確定\",color:\"primary\"},on:{click:e.handleLaeveGame}})],1)],1)],1),a(\"q-page-sticky\",{attrs:{position:\"bottom-right\"}},[a(\"div\",{staticClass:\"row q-gutter-md q-mr-md q-mb-xs\"},[a(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:\"help_outline\",size:\"sm\",color:\"blue-grey-9\"},on:{click:e.handleQuestionclick}}),a(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:\"person_add\",size:\"sm\",color:\"blue-grey-9\",disable:e.isGameOver},on:{click:e.handleInviteclick}}),a(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:\"exit_to_app\",size:\"sm\",color:\"blue-grey-9\"},on:{click:e.showLeaveDialog}})],1)])],1)],1),a(\"GameFooter\")],1)},i=[],o=a(\"ded3\"),n=a.n(o),r=(a(\"6378\"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-header\",{staticClass:\"bg-blue-grey-9\",attrs:{elevated:\"\",bordered:\"\"}},[a(\"q-item\",{staticClass:\"q-pa-sm\",attrs:{dense:\"\"}},[e.roomId&&e.user?a(\"q-item-section\",{staticClass:\"gt-xs\",attrs:{avatar:\"\"}},[a(\"div\",{staticStyle:{width:\"100px\"}},[a(\"div\",{staticClass:\"text-bold ellipsis full-width\"},[e._v(\"\\n          房號: \"+e._s(e.roomId)+\"\\n        \")]),a(\"q-img\",{attrs:{src:e.userRoleImage,width:\"100px\",height:\"140px\"}}),a(\"div\",{staticClass:\"text-bold fz-sm ellipsis full-width text-center\"},[e._v(\"\\n          \"+e._s(e.user)+\"\\n        \")])],1)]):e._e(),a(\"q-item-section\",[a(\"q-item-label\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.roomId,expression:\"roomId\"}],staticClass:\"q-pa-sm text-bold lt-sm\"},[e._v(\"\\n        房號: \"+e._s(e.roomId)+\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.user,expression:\"user\"}]},[e._v(\"(\"+e._s(e.user)+\")\")])]),a(\"div\",{staticClass:\"flex justify-center\",staticStyle:{\"min-height\":\"80px\"}},e._l(5,(function(t){return a(\"div\",{key:t,staticClass:\"flex\",class:t%2===0?\"\":\"content-end\"},[a(\"q-avatar\",{staticClass:\"q-mx-sm text-no-wrap shadow-24 flex flex-center\",attrs:{size:\"55px\",\"font-size\":\"18px\",color:\"black\",\"text-color\":\"white\"}},[!1===e.taskResultList[t-1]?a(\"img\",{attrs:{src:\"score_fail.jpg\"}}):!0===e.taskResultList[t-1]?a(\"img\",{attrs:{src:\"score_success.jpg\"}}):void 0===e.taskResultList[t-1]?[e._v(\"\\n              任務\"+e._s(t)+\"\\n            \")]:e._e()],2)],1)})),0),a(\"div\",{staticClass:\"row q-pt-md justify-center\"},e._l(5,(function(t){return a(\"div\",{key:t,staticClass:\"flex flex-center\"},[a(\"q-avatar\",{staticClass:\"q-mx-sm relative-position overflow-hidden\",attrs:{size:\"30px\",color:\"black\",\"text-color\":\"white\"}},[a(\"img\",{attrs:{src:\"unapprove.jpg\"}}),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t>e.unApproveCount,expression:\"n > unApproveCount\"}],staticClass:\"fit bg-black absolute\",staticStyle:{opacity:\"0.7\"}})])],1)})),0)],1)],1)],1)}),l=[],c=a(\"5880\"),m={name:\"GameHeader\",computed:n()(n()({},Object(c[\"mapGetters\"])(\"game\",[\"userRoleImage\"])),Object(c[\"mapState\"])(\"game\",[\"roomId\",\"taskResultList\",\"user\",\"unApproveCount\"]))},d=m,p=a(\"2877\"),h=a(\"7c52\"),u=a(\"eebe\"),g=a.n(u),v=Object(p[\"a\"])(d,r,l,!1,null,null,\"0ba4ef74\"),b=v.exports;g()(v,\"components\",{QHeader:h[\"QHeader\"],QItem:h[\"QItem\"],QItemSection:h[\"QItemSection\"],QImg:h[\"QImg\"],QItemLabel:h[\"QItemLabel\"],QAvatar:h[\"QAvatar\"]});var y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-footer\",{staticClass:\"bg-white text-black q-pa-md\",attrs:{elevated:\"\",bordered:\"\"}},[a(\"q-item\",{staticClass:\"q-pa-none\"},[a(\"q-item-section\",[a(\"GameMessageList\")],1),a(\"q-item-section\",{attrs:{side:\"\",top:\"\"}},[a(\"GameOperateButton\")],1)],1)],1)},S=[],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"fit fz-md relative-position\",on:{click:e.handleNextMessage}},[a(\"MessageBoard\",{attrs:{message:e.messageBoaredText}}),e.hasNextMessage?a(\"q-icon\",{staticClass:\"absolute-bottom-right cursor-pointer\",attrs:{id:\"next-button\",name:\"arrow_drop_down\",size:\"lg\"}}):e._e()],1)},w=[],C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"fit\"},[e._ssrNode(e._ssrEscape(\"\\n  \"+e._s(e.text)+\"\\n\"))])},q=[],x={name:\"MessageBoard\",props:{message:{type:String,required:!0}},data(){return{delayMilliSencond:80,timer:null,textCount:0}},computed:{text(){return this.message?this.message.substr(0,this.textCount):\"\"}},watch:{message(e){this.textCount=1,clearInterval(this.timer),e&&this.setTypeMessageTimer()}},mounted(){this.setTypeMessageTimer()},methods:{async setTypeMessageTimer(){this.timer=setInterval((()=>{this.textCount+=1,this.textCount>=this.message.length&&clearInterval(this.timer)}),this.delayMilliSencond)}}},Q=x,k=Object(p[\"a\"])(Q,C,q,!1,null,null,\"34c1ce86\"),_=k.exports,I={name:\"GameMessageList\",components:{MessageBoard:_},computed:n()(n()(n()({},Object(c[\"mapState\"])(\"game\",[\"messageList\"])),Object(c[\"mapGetters\"])(\"game\",[\"isStarted\",\"isHost\"])),{},{messageBoaredText(){return this.messageList[0]},hasNextMessage(){return this.messageList.length>1}}),methods:n()(n()({},Object(c[\"mapMutations\"])(\"game\",[\"shiftMessage\"])),{},{handleNextMessage(){this.hasNextMessage&&this.shiftMessage()}})},T=I;function A(e){var t=a(\"ab46\");t.__inject__&&t.__inject__(e)}var L=Object(p[\"a\"])(T,f,w,!1,A,\"7ea1dfa2\",\"7efd2c5c\"),P=L.exports;g()(L,\"components\",{QIcon:h[\"QIcon\"]});var D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShowStartButton?a(\"q-btn\",{attrs:{rounded:\"\",color:\"positive\",glossy:\"\",label:\"遊戲開始\"},on:{click:e.handleStart}}):e.isShowSelectTaskTeamButton?a(\"q-btn\",{attrs:{padding:\"0\",round:\"\"},on:{click:e.assignTaskTeam}},[a(\"q-avatar\",{attrs:{size:\"65px\"}},[a(\"img\",{attrs:{src:\"task.jpg\"}})])],1):e.isShowAssignRevealPlayerButton?a(\"q-btn\",{attrs:{padding:\"0\",round:\"\"},on:{click:e.assignRevealPlayer}},[a(\"q-avatar\",{attrs:{size:\"65px\"}},[a(\"img\",{attrs:{src:\"god.jpg\"}})])],1):e.isShowVoteButton?a(\"div\",{staticClass:\"row no-wrap\"},[a(\"q-btn\",{staticClass:\"q-mr-md\",attrs:{rounded:\"\",color:\"positive\",glossy:\"\",label:\"成功\"},on:{click:function(t){return e.handleVote(!0)}}}),a(\"q-btn\",{attrs:{rounded:\"\",color:\"negative\",glossy:\"\",label:\"失敗\"},on:{click:function(t){return e.handleVote(!1)}}})],1):e.isShowApproveButton?a(\"div\",{staticClass:\"row no-wrap\"},[a(\"q-btn\",{staticClass:\"q-mr-md\",attrs:{rounded:\"\",color:\"positive\",glossy:\"\",label:\"贊成\"},on:{click:function(t){return e.handleApprove(!0)}}}),a(\"q-btn\",{attrs:{rounded:\"\",color:\"negative\",glossy:\"\",label:\"反對\"},on:{click:function(t){return e.handleApprove(!1)}}})],1):e.isShowGodStatementButton?a(\"div\",{staticClass:\"row no-wrap\"},[a(\"q-btn\",{staticClass:\"q-mr-md\",attrs:{rounded:\"\",color:\"positive\",glossy:\"\",label:\"他是忠臣\"},on:{click:function(t){return e.assignGodState(!0)}}}),a(\"q-btn\",{attrs:{rounded:\"\",color:\"negative\",glossy:\"\",label:\"他是爪牙\"},on:{click:function(t){return e.assignGodState(!1)}}})],1):e.isShowAssignKillPlayerButton?a(\"q-btn\",{attrs:{padding:\"0\",round:\"\"},on:{click:e.assignKillPlayer}},[a(\"q-avatar\",{attrs:{size:\"65px\"}},[a(\"img\",{attrs:{src:\"kill.jpg\"}})])],1):e._e()},G=[],N=a(\"6ffa\"),O={name:\"GameOperateButton\",computed:n()(n()(n()({},Object(c[\"mapState\"])(\"game\",[\"status\",\"teamSize\",\"revealPlayer\",\"selectedTaskTeamList\",\"killPlayer\"])),Object(c[\"mapGetters\"])(\"game\",[\"isHost\",\"isStarted\",\"isValidGamePlayerCount\"])),{},{isShowStartButton(){return this.status===N[\"a\"].WAIT_START&&this.isHost&&!this.isStarted},isShowSelectTaskTeamButton(){return this.status===N[\"a\"].SELECT_TASK_PLAYER},isShowVoteButton(){return this.status===N[\"a\"].VOTE},isShowApproveButton(){return this.status===N[\"a\"].APPROVE},isShowGodStatementButton(){return this.status===N[\"a\"].ASSIGN_GOD_STATEMENT},isShowAssignRevealPlayerButton(){return this.status===N[\"a\"].SELECT_REVEAL_PLAYER},isShowAssignKillPlayerButton(){return this.status===N[\"a\"].SELECT_KILL_PLAYER}}),methods:n()(n()({},Object(c[\"mapActions\"])(\"game\",[\"startGameAction\",\"assignTaskTeamAction\",\"voteTaskAction\",\"approveAction\",\"assignGodStatementAction\",\"assignRevealPlayerAction\",\"assignKillPlayerAction\"])),{},{handleStart(){!1!==this.isValidGamePlayerCount?this.startGameAction():this.$q.notify({message:\"玩家人數不符\"})},assignTaskTeam(){this.selectedTaskTeamList.length===this.teamSize?this.assignTaskTeamAction():this.$q.notify({message:`請選擇 ${this.teamSize} 位出任務玩家`})},assignRevealPlayer(){\"\"!==this.revealPlayer?this.assignRevealPlayerAction():this.$q.notify({message:\"請選擇檢視玩家\"})},handleVote(e){this.voteTaskAction(e)},handleApprove(e){this.approveAction(e)},assignGodState(e){this.assignGodStatementAction(e)},assignKillPlayer(){\"\"!==this.killPlayer?this.assignKillPlayerAction():this.$q.notify({message:\"請選擇刺殺玩家\"})}})},R=O,j=Object(p[\"a\"])(R,D,G,!1,null,null,\"44944ea6\"),E=j.exports;g()(j,\"components\",{QBtn:h[\"QBtn\"],QAvatar:h[\"QAvatar\"]});var B={name:\"GameFooter\",components:{GameMessageList:P,GameOperateButton:E}},$=B,z=Object(p[\"a\"])($,y,S,!1,null,null,\"4e09b758\"),M=z.exports;g()(z,\"components\",{QFooter:h[\"QFooter\"],QItem:h[\"QItem\"],QItemSection:h[\"QItemSection\"]});var K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"row q-pt-md q-col-gutter-sm\"},e._l(e.playerList,(function(t,s){return e._ssrNode('<div class=\"col-4\">',\"</div>\",[a(\"PlayerListItem\",{attrs:{player:t}})],1)})),0)},H=[],V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"bg-black column items-center q-pt-sm q-px-sm relative-position\",class:\"bd-p\"+e.order,staticStyle:{\"border-radius\":\"10px\"},on:{click:e.handlePlayerClick}},[a(\"q-img\",{staticStyle:{\"border-radius\":\"10px\",\"max-width\":\"80px\",\"max-height\":\"112px\"},attrs:{src:e.roleImageUrl,basic:\"\",width:\"100%\",height:\"112px\",\"no-default-spinner\":\"\"}}),e._ssrNode('<div class=\"text-bold ellipsis text-white fz-sm text-center full-width\">'+e._ssrEscape(\"\\n    \"+e._s(e.player.name)+\"\\n  \")+\"</div>\"),a(\"q-badge\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isShowLeaderSign,expression:\"isShowLeaderSign\"}],staticClass:\"q-pa-none bg-transparent\",staticStyle:{left:\"-3px\"},attrs:{floating:\"\",rounded:\"\"}},[a(\"q-avatar\",{attrs:{size:\"40px\"}},[a(\"img\",{attrs:{src:\"crown.jpg\"}})])],1),a(\"q-badge\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isShowTaskTeamSign,expression:\"isShowTaskTeamSign\"}],staticClass:\"q-pa-none bg-transparent\",attrs:{floating:\"\",rounded:\"\"}},[a(\"q-avatar\",{attrs:{size:\"40px\"}},[a(\"img\",{attrs:{src:\"task.jpg\"}})])],1),a(\"q-badge\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isShowGodSign,expression:\"isShowGodSign\"}],staticClass:\"q-pa-none bg-transparent absolute-left\",attrs:{floating:\"\",rounded:\"\"}},[a(\"q-avatar\",{attrs:{size:\"40px\"}},[a(\"img\",{attrs:{src:\"god.jpg\"}})])],1),a(\"q-badge\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.isShowKillSign,expression:\"isShowKillSign\"}],staticClass:\"q-pa-none bg-transparent absolute\",attrs:{floating:\"\",rounded:\"\"}},[a(\"q-avatar\",{attrs:{size:\"40px\"}},[a(\"img\",{attrs:{src:\"kill.jpg\"}})])],1)],2)},F=[],U=a(\"0373\"),Y={name:\"PlayerListItem\",props:{player:{type:Object,required:!0}},computed:n()(n()(n()({},Object(c[\"mapGetters\"])(\"game\",[\"isLeader\",\"isSelectedTaskTeamPlayer\",\"isTaskTeamPlayer\",\"playerOrder\"])),Object(c[\"mapState\"])(\"game\",[\"status\",\"revealPlayer\",\"killPlayer\",\"revealedPlayerList\"])),{},{order(){return this.playerOrder(this.player.name)},playerName(){return this.player.name},isShowLeaderSign(){return this.isLeader(this.player.name)},isShowKillSign(){return this.killPlayer===this.player.name},isShowTaskTeamSign(){const e=this.player.name;return this.isSelectedTaskTeamPlayer(e)||this.isTaskTeamPlayer(e)},isShowGodSign(){return this.playerName===this.revealPlayer},roleImageUrl(){return Object(U[\"e\"])(this.player.role)},hasReveal(){return this.revealedPlayerList.includes(this.playerName)}}),methods:n()(n()({},Object(c[\"mapMutations\"])(\"game\",[\"addSelectedTaskTeamPlayer\",\"removeSelectedTaskTeamPlayer\",\"setRevealPlayer\",\"setKillPlayer\"])),{},{handlePlayerClick(){this.status!==N[\"a\"].SELECT_TASK_PLAYER?this.status!==N[\"a\"].SELECT_REVEAL_PLAYER?this.status===N[\"a\"].SELECT_KILL_PLAYER&&this.handleSelectKillPlayer():this.handleSelectRevealPlayer():this.handleSelectTaskTeam()},handleSelectTaskTeam(){this.isSelectedTaskTeamPlayer(this.playerName)?this.removeSelectedTaskTeamPlayer(this.playerName):this.addSelectedTaskTeamPlayer(this.playerName)},handleSelectRevealPlayer(){this.hasReveal?this.$q.notify({message:\"無法選擇檢視過的玩家\"}):this.setRevealPlayer(this.playerName)},handleSelectKillPlayer(){\"\"===this.killPlayer?this.setKillPlayer(this.playerName):this.setKillPlayer(\"\")}})},J=Y,X=Object(p[\"a\"])(J,V,F,!1,null,null,\"5d25a8f9\"),W=X.exports;g()(X,\"components\",{QImg:h[\"QImg\"],QBadge:h[\"QBadge\"],QAvatar:h[\"QAvatar\"]});var Z={name:\"PlayerList\",components:{PlayerListItem:W},computed:n()({},Object(c[\"mapState\"])(\"game\",[\"playerList\"]))},ee=Z,te=Object(p[\"a\"])(ee,K,H,!1,null,null,\"3ef71246\"),ae=te.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-dialog\",{attrs:{persistent:\"\"},model:{value:e.isShowGameDialog,callback:function(t){e.isShowGameDialog=t},expression:\"isShowGameDialog\"}},[a(\"q-card\",{attrs:{dark:\"\",bordered:\"\"}},[a(\"q-card-section\",[a(\"div\",{staticClass:\"text-h6\"},[e._v(\"\\n        \"+e._s(e.message)+\"\\n      \")])])],1)],1)},ie=[],oe={name:\"GameDialog\",computed:n()(n()(n()({},Object(c[\"mapGetters\"])(\"game\",[\"isShowGameDialog\"])),Object(c[\"mapState\"])(\"game\",[\"offlinePlayerList\"])),{},{message(){const e=this.offlinePlayerList.join(\", \");return`${e} 離開位置去上廁所 !!`}})},ne=oe,re=Object(p[\"a\"])(ne,se,ie,!1,null,null,\"31c0cd81\"),le=re.exports;g()(re,\"components\",{QDialog:h[\"QDialog\"],QCard:h[\"QCard\"],QCardSection:h[\"QCardSection\"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-dialog\",{attrs:{persistent:\"\"},model:{value:e.isShowLoginDialog,callback:function(t){e.isShowLoginDialog=t},expression:\"isShowLoginDialog\"}},[a(\"q-card\",{attrs:{bordered:\"\",dark:\"\"}},[a(\"q-card-section\",{staticClass:\"q-pb-sm\"},[a(\"q-input\",{ref:\"player\",attrs:{dark:\"\",\"input-class\":\"text-center text-primary fz-md\",rules:[function(e){return!!e||\"請輸入暱稱\"},function(e){return e.length<=8||\"字數限制 8\"}],placeholder:\"遊戲暱稱\"},model:{value:e.player,callback:function(t){e.player=t},expression:\"player\"}},[a(\"q-menu\",{attrs:{fit:\"\",dark:\"\",target:e.$refs.player,\"content-class\":\"\"}},[a(\"q-list\",e._l(e.recommandNames,(function(t,s){return a(\"q-item\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],key:s,attrs:{clickable:\"\"},on:{click:function(a){return e.setPlayer(t)}}},[a(\"q-item-section\",{staticClass:\"text-center fz-sm\"},[e._v(\"\\n                \"+e._s(t)+\"\\n              \")])],1)})),1)],1)],1)],1),a(\"q-card-actions\",{staticClass:\"q-pb-md\",attrs:{align:\"center\"}},[a(\"q-btn\",{staticClass:\"fz-md\",attrs:{outline:\"\",push:\"\",rounded:\"\",loading:e.isConnectingGame||e.isFetchingHost,color:e.buttonColor,padding:\"sm md\",label:e.buttonText},on:{click:e.handleClick}})],1)],1)],1)},me=[];const de=async(e=1)=>new Promise((t=>{setTimeout(t,1e3*e)}));var pe=a(\"34c9\"),he={name:\"LoginDialog\",data(){return{player:\"\",roomId:\"\",host:\"\",isFetchingHost:!1,isButtonAvailable:!0,options:[],recommandNames:[\"金城武\",\"黎明\",\"劉德華\",\"梁朝偉\",\"金貝貝\",\"阿土伯\",\"孫小美\",\"小蝦米\",\"山下智囧\",\"9527\"]}},computed:n()(n()(n()({},Object(c[\"mapGetters\"])(\"game\",[\"isShowLoginDialog\"])),Object(c[\"mapState\"])(\"game\",[\"isConnectingGame\"])),{},{buttonText(){const{roomId:e,host:t}=this;return e&&t?`加入${this.host}的遊戲`:e&&!t?`遊戲(${e}) 不存在 !`:\"建立遊戲\"},buttonColor(){const{roomId:e,host:t}=this;return e&&t?\"primary\":e&&!t?\"negative\":\"primary\"},isShowButton(){return\"\"!==this.player},isShowRoomIdInput(){return!!this.roomId}}),async mounted(){const{roomId:e}=this.$route.params,t=this.$q.localStorage.getItem(\"player\")||\"\";this.player=t,e&&(this.roomId=e,this.host=await this.fetchGameHostName(e))},methods:n()(n()(n()({},Object(c[\"mapMutations\"])(\"game\",[\"setRoomId\",\"setUser\",\"setIsShowInviteDialog\"])),Object(c[\"mapActions\"])(\"game\",[\"createGameAction\",\"joinGameAction\",\"handleJoinGameAction\"])),{},{async handleCreate(){const e=async e=>{await this.$router.push({path:`/${e}`}).catch((()=>{})),this.setIsShowInviteDialog(!0)},t=()=>{this.$q.notify({message:\"遊戲連線錯誤\"})};await this.createGameAction({player:this.player,handleSuccess:e,handleError:t})},async handleJoin(){const e=e=>{this.$router.push({path:`/${e}`}).catch((()=>{}))},t=(e=\"遊戲連線錯誤\")=>{this.$q.notify({message:e})};await this.handleJoinGameAction({player:this.player,roomId:this.roomId,handleSuccess:e,handleError:t})},async handleClick(){\"\"!==this.player?!1!==this.isButtonAvailable?(this.$q.localStorage.set(\"player\",this.player),this.roomId&&this.host?(this.setClickTimer(),await this.handleJoin()):this.roomId?this.roomId=\"\":(this.setClickTimer(),await this.handleCreate())):this.$q.notify({message:\"請稍候在試！\"}):this.$q.notify({message:\"請輸入遊戲暱稱\"})},async setClickTimer(){this.isButtonAvailable=!1,await de(3),this.isButtonAvailable=!0},async fetchGameHostName(e){try{this.isFetchingHost=!0;const t=await Object(pe[\"b\"])(e),a=t.data.host||\"\";return a}catch(t){return\"\"}finally{this.isFetchingHost=!1}},filterFn(e,t){t((()=>{this.options=this.recommandNames.filter((t=>t.includes(e)))}))},setPlayer(e){this.player=e}})},ue=he,ge=Object(p[\"a\"])(ue,ce,me,!1,null,null,\"65cc89fa\"),ve=ge.exports;g()(ge,\"components\",{QDialog:h[\"QDialog\"],QCard:h[\"QCard\"],QCardSection:h[\"QCardSection\"],QInput:h[\"QInput\"],QMenu:h[\"QMenu\"],QList:h[\"QList\"],QItem:h[\"QItem\"],QItemSection:h[\"QItemSection\"],QCardActions:h[\"QCardActions\"],QBtn:h[\"QBtn\"]}),g()(ge,\"directives\",{ClosePopup:h[\"ClosePopup\"]});var be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-dialog\",{attrs:{persistent:\"\"},model:{value:e.isShowConnectingDialog,callback:function(t){e.isShowConnectingDialog=t},expression:\"isShowConnectingDialog\"}},[a(\"q-card\",{attrs:{dark:\"\",bordered:\"\"}},[e.isShowReconnectingText?a(\"q-card-section\",{staticClass:\"row items-center\"},[a(\"div\",{staticClass:\"text-h6 q-px-md\"},[e._v(\"\\n        遊戲連線中\\n      \")]),a(\"q-spinner-dots\",{attrs:{color:\"primary\",size:\"2em\"}})],1):a(\"q-card-section\",{staticClass:\"row items-center\"},[a(\"q-icon\",{attrs:{name:\"error_outline\",size:\"2em\",color:\"primary\"}}),a(\"div\",{staticClass:\"text-h6 q-px-md\"},[e._v(\"\\n        連線失敗\\n      \")]),a(\"q-btn\",{attrs:{label:\"離開\",flat:\"\",color:\"primary\",unelevated:\"\"},on:{click:e.handleLaeveGame}})],1)],1)],1)},ye=[],Se={name:\"GameConnectingDialog\",computed:n()(n()(n()({},Object(c[\"mapGetters\"])(\"game\",[\"isShowConnectingDialog\"])),Object(c[\"mapState\"])(\"game\",[\"reconnectCount\"])),{},{isShowReconnectingText(){return this.reconnectCount<=3}}),methods:{handleLaeveGame(){this.$router.replace(\"/\").then((()=>{window.location.reload()})).catch((()=>{window.location.reload()}))}}},fe=Se,we=Object(p[\"a\"])(fe,be,ye,!1,null,null,\"3a394d19\"),Ce=we.exports;g()(we,\"components\",{QDialog:h[\"QDialog\"],QCard:h[\"QCard\"],QCardSection:h[\"QCardSection\"],QSpinnerDots:h[\"QSpinnerDots\"],QIcon:h[\"QIcon\"],QBtn:h[\"QBtn\"]});var qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-dialog\",{attrs:{maximized:\"\",\"transition-show\":\"slide-up\",\"transition-hide\":\"slide-down\"},model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:\"isShowDialog\"}},[a(\"q-card\",{ref:\"card\",staticClass:\"column no-wrap\",staticStyle:{\"max-width\":\"760px\"}},[a(\"q-card-section\",{staticClass:\"row justify-between items-center bg-white q-pb-none\",staticStyle:{position:\"sticky\",top:\"0\",\"z-index\":\"10\"}},[a(\"q-tabs\",{model:{value:e.tab,callback:function(t){e.tab=t},expression:\"tab\"}},[a(\"q-tab\",{attrs:{name:\"role\",label:\"角色介紹\"}}),a(\"q-tab\",{attrs:{name:\"rule\",label:\"勝利條件\"}})],1),a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{icon:\"close\",round:\"\",push:\"\",color:\"black\",\"text-color\":\"white\",padding:\"4px\",size:\"md\"}})],1),a(\"q-tab-panels\",{staticClass:\"col\",attrs:{animated:\"\",swipeable:\"\",\"keep-alive\":\"\"},model:{value:e.tab,callback:function(t){e.tab=t},expression:\"tab\"}},[a(\"q-tab-panel\",{staticClass:\"scroll overflow-auto\",attrs:{name:\"role\"}},[a(\"GameRoleList\")],1),a(\"q-tab-panel\",{staticClass:\"scroll overflow-auto\",attrs:{name:\"rule\"}},[a(\"GameRule\")],1)],1)],1)],1)},xe=[],Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-list\",{attrs:{separator:\"\"}},e._l(e.gameRoleList,(function(t,s){return a(\"q-item\",{key:s},[a(\"q-item-section\",{attrs:{avatar:\"\",top:\"\"}},[a(\"q-avatar\",{attrs:{size:\"100px\"}},[a(\"img\",{staticStyle:{\"object-fit\":\"cover\"},attrs:{src:t.image}})])],1),a(\"q-item-section\",{attrs:{top:\"\"}},[a(\"q-item-label\",{staticClass:\"text-bold fz-lg q-py-xs\",attrs:{header:\"\"}},[e._v(\"\\n        \"+e._s(t.name)+\"\\n      \")]),a(\"q-item-label\",{staticClass:\"fz-md\"},[e._v(\"\\n        \"+e._s(t.description)+\"\\n      \")])],1)],1)})),1)},ke=[],_e={name:\"GameRoleList\",data(){return{gameRoleList:[{image:U[\"c\"].MERLIN,name:U[\"d\"].MERLIN,description:U[\"b\"].MERLIN},{image:U[\"c\"].PERCIVAL,name:U[\"d\"].PERCIVAL,description:U[\"b\"].PERCIVAL},{image:U[\"c\"].SERVANT,name:U[\"d\"].SERVANT,description:U[\"b\"].SERVANT},{image:U[\"c\"].MORDRED,name:U[\"d\"].MORDRED,description:U[\"b\"].MORDRED},{image:U[\"c\"].ASSASSIN,name:U[\"d\"].ASSASSIN,description:U[\"b\"].ASSASSIN},{image:U[\"c\"].MORGANA,name:U[\"d\"].MORGANA,description:U[\"b\"].MORGANA},{image:U[\"c\"].OBERON,name:U[\"d\"].OBERON,description:U[\"b\"].OBERON},{image:U[\"c\"].MINION,name:U[\"d\"].MINION,description:U[\"b\"].MINION},{image:U[\"c\"].GOD,name:U[\"d\"].GOD,description:U[\"b\"].GOD}]}}},Ie=_e,Te=Object(p[\"a\"])(Ie,Qe,ke,!1,null,null,\"6ab5dfa6\"),Ae=Te.exports;g()(Te,\"components\",{QList:h[\"QList\"],QItem:h[\"QItem\"],QItemSection:h[\"QItemSection\"],QAvatar:h[\"QAvatar\"],QItemLabel:h[\"QItemLabel\"]});var Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"fz-sm fit\"},[e._ssrNode('<div class=\"text-bold fz-md\">\\n    正義陣營獲勝\\n  </div>'),e._ssrNode('<ul style=\"list-style-type:disc\">',\"</ul>\",[e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"\\n      任務成功3次，且梅林沒有被刺殺。\\n      (\"),a(\"q-avatar\",{attrs:{size:\"30px\",color:\"black\"}},[a(\"img\",{attrs:{src:\"score_success.jpg\"}})]),e._ssrNode(\"\\n      X 3)\\n    \")],2)]),e._ssrNode('<div class=\"text-bold fz-md\">\\n    邪惡陣營獲勝\\n  </div>'),e._ssrNode('<ul style=\"list-style-type:disc\">',\"</ul>\",[e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"\\n      任務失敗3次。\\n      (\"),a(\"q-avatar\",{attrs:{size:\"30px\",color:\"black\"}},[a(\"img\",{attrs:{src:\"score_fail.jpg\"}})]),e._ssrNode(\"\\n      X 3)\\n    \")],2),e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"\\n      領袖選擇出任務成員時，連續投票失敗5次。\\n      (\"),a(\"q-avatar\",{attrs:{size:\"30px\",color:\"black\"}},[a(\"img\",{attrs:{src:\"unapprove.jpg\"}})]),e._ssrNode(\" X 5)\\n    \")],2),e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"\\n      (任務成功3次後)刺殺梅林成功。\\n      \"),a(\"q-avatar\",{attrs:{size:\"30px\",color:\"black\"}},[a(\"img\",{attrs:{src:\"kill.jpg\"}})])],2),a(\"q-icon\")],1),e._ssrNode('<div class=\"text-bold fz-md\">\\n    湖中女神\\n  </div>'),e._ssrNode('<ul style=\"list-style-type:disc\">',\"</ul>\",[e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"\\n      第一次湖中女神指示物為第二位玩家擁有。\\n      \"),a(\"q-avatar\",{attrs:{size:\"30px\",color:\"black\"}},[a(\"img\",{attrs:{src:\"god.jpg\"}})])],2),e._ssrNode(\"<li>\\n      第2、3、4回合，出完任務後才可以使用湖中女神能力。\\n    </li><li>\\n      持有湖中女神指示物的玩家選擇要檢視的對象，但是不可以選擇之前被湖中女神能力看過的玩家。\\n    </li><li>\\n      被檢視的玩家將會成為新的湖中女神指示物持有者。\\n    </li>\"),a(\"q-icon\")],2)],2)},Pe=[],De={name:\"GameRule\"},Ge=De,Ne=Object(p[\"a\"])(Ge,Le,Pe,!1,null,null,\"1b766175\"),Oe=Ne.exports;g()(Ne,\"components\",{QAvatar:h[\"QAvatar\"],QIcon:h[\"QIcon\"]});var Re={name:\"GameRoleDialog\",components:{GameRoleList:Ae,GameRule:Oe},data(){return{isShowDialog:!1,tab:\"role\"}},methods:{showDialog(){this.isShowDialog=!0}}},je=Re,Ee=Object(p[\"a\"])(je,qe,xe,!1,null,null,\"e77253d2\"),Be=Ee.exports;g()(Ee,\"components\",{QDialog:h[\"QDialog\"],QCard:h[\"QCard\"],QCardSection:h[\"QCardSection\"],QTabs:h[\"QTabs\"],QTab:h[\"QTab\"],QBtn:h[\"QBtn\"],QTabPanels:h[\"QTabPanels\"],QTabPanel:h[\"QTabPanel\"]}),g()(Ee,\"directives\",{ClosePopup:h[\"ClosePopup\"]});var $e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"q-dialog\",{attrs:{\"transition-show\":\"slide-up\",\"transition-hide\":\"slide-down\",maximized:\"\"},model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:\"isShowDialog\"}},[a(\"q-card\",{ref:\"card\",staticClass:\"relative-position q-pb-md\",staticStyle:{\"max-width\":\"550px\",height:\"auto\"}},[a(\"q-card-section\",{staticClass:\"text-h6 text-bold text-center\"},[e._v(\"\\n      快速邀請朋友加入遊戲\\n    \")]),a(\"q-card-section\",{staticClass:\"flex flex-center q-pt-none\"},[a(\"q-img\",{staticStyle:{\"max-width\":\"300px\"},attrs:{width:\"100%\",src:e.qrCodeUrl}})],1),a(\"q-card-actions\",{staticClass:\"q-px-lg\",attrs:{align:\"center\"}},[a(\"q-btn\",{staticClass:\"full-width\",attrs:{label:\"邀請連結\",color:\"primary\",outline:!e.isCopied},on:{click:e.handleCopyLinkClick}})],1),a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],staticClass:\"q-ma-md absolute-top-right\",attrs:{icon:\"close\",round:\"\",push:\"\",color:\"black\",\"text-color\":\"white\",padding:\"4px\",size:\"md\"}})],1)],1)},ze=[],Me=a(\"736c\"),Ke=a.n(Me),He={name:\"InviteDialog\",data(){return{qrCodeUrl:\"\",isCopied:!1}},computed:n()(n()({},Object(c[\"mapState\"])(\"game\",[\"roomId\",\"isShowInviteDialog\"])),{},{isShowDialog:{get(){return this.isShowInviteDialog},set(e){this.setIsShowInviteDialog(e)}},link(){return`https://avalonclient.herokuapp.com/${this.roomId}`}}),async updated(){await this.setQrCodeUrl()},async mounted(){await this.setQrCodeUrl()},methods:n()(n()({},Object(c[\"mapMutations\"])(\"game\",[\"setIsShowInviteDialog\"])),{},{showDialog(){this.setIsShowInviteDialog(!0)},async setQrCodeUrl(){const e={errorCorrectionLevel:\"H\",type:\"image/jpeg\",quality:1,margin:1};this.qrCodeUrl=await Ke.a.toDataURL(this.link,e)},handleCopyLinkClick(){Object(h[\"copyToClipboard\"])(this.link).then((()=>{this.isCopied=!0})).catch((()=>{this.$q.notify({message:\"複製失敗\"})}))}})},Ve=He,Fe=Object(p[\"a\"])(Ve,$e,ze,!1,null,null,\"3fa73818\"),Ue=Fe.exports;g()(Fe,\"components\",{QDialog:h[\"QDialog\"],QCard:h[\"QCard\"],QCardSection:h[\"QCardSection\"],QImg:h[\"QImg\"],QCardActions:h[\"QCardActions\"],QBtn:h[\"QBtn\"]}),g()(Fe,\"directives\",{ClosePopup:h[\"ClosePopup\"]});var Ye={name:\"GameLayout\",components:{GameHeader:b,GameFooter:M,PlayerList:ae,GameDialog:le,LoginDialog:ve,GameConnectingDialog:Ce,GameRoleDialog:Be,InviteDialog:Ue},data(){return{confirm:!1}},computed:n()(n()({},Object(c[\"mapState\"])(\"game\",[\"isGameOver\"])),{},{link(){return\"https://avalonclient.herokuapp.com\"+this.$route.fullPath}}),async preFetch({store:e,currentRoute:t}){const{roomId:a}=t.params;a&&await e.dispatch(\"game/fetchGameInfoAction\",a)},methods:n()(n()({},Object(c[\"mapMutations\"])(\"game\",[\"setIsShowInviteDialog\"])),{},{handleQuestionclick(){this.$refs.gameRoleDialog.showDialog()},handleInviteclick(){this.setIsShowInviteDialog(!0)},showLeaveDialog(){this.confirm=!0},handleLaeveGame(){this.$router.replace(\"/\").then((()=>{window.location.reload()})).catch((()=>{window.location.reload()}))},myTweak(e){return{minHeight:e?`calc(100vh - ${e}px)`:\"100vh\"}}}),meta(){return{title:\"阿瓦隆 - 陣營對抗桌遊\",meta:{description:{name:\"description\",content:\"阿瓦隆(Avalon)是很熱門的陣營類桌遊，已經推出了好幾年，一直受到許多玩家熱愛。遊戲中玩家分成兩大陣營，每個陣營內有能力者和普通角色，玩家要通過邏輯推理和對話來試探彼此的陣營。\"},keywords:{name:\"keywords\",content:\"avalon 桌遊 阿瓦隆\"},equiv:{\"http-equiv\":\"Content-Type\",content:\"text/html; charset=UTF-8\"},ogTitle:{name:\"og:title\",content:\"阿瓦隆 - 陣營對抗桌遊\"},ogDescription:{name:\"og:description\",content:\"阿瓦隆(Avalon)是很熱門的陣營類桌遊，已經推出了好幾年，一直受到許多玩家熱愛。遊戲中玩家分成兩大陣營，每個陣營內有能力者和普通角色，玩家要通過邏輯推理和對話來試探彼此的陣營。\"},ogImage:{name:\"og:image\",content:\"https://avalonclient.herokuapp.com/assassin.jpg\"},ogUrl:{name:\"og:url\",content:this.link}}}}},Je=Ye,Xe=Object(p[\"a\"])(Je,s,i,!1,null,null,\"00be26a4\");t[\"default\"]=Xe.exports;g()(Xe,\"components\",{QLayout:h[\"QLayout\"],QPageContainer:h[\"QPageContainer\"],QPage:h[\"QPage\"],QDialog:h[\"QDialog\"],QCard:h[\"QCard\"],QCardSection:h[\"QCardSection\"],QCardActions:h[\"QCardActions\"],QBtn:h[\"QBtn\"],QPageSticky:h[\"QPageSticky\"],QIcon:h[\"QIcon\"]}),g()(Xe,\"directives\",{ClosePopup:h[\"ClosePopup\"]})},eebe:function(e,t){e.exports=function(e,t,a){var s;if(\"function\"===typeof e.exports?(s=e.exports.extendOptions,s[t]=e.exports.options[t]):s=e.options,void 0===s[t])s[t]=a;else{var i=s[t];for(var o in a)void 0===i[o]&&(i[o]=a[o])}}}};",
    "js/2.8aa49786.js": "exports.ids=[2],exports.modules={e51e:function(e,t,o){\"use strict\";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",{staticClass:\"fullscreen bg-blue text-white text-center q-pa-md flex flex-center\"},[e._ssrNode(\"<div>\",\"</div>\",[e._ssrNode('<div style=\"font-size: 30vh\">\\n      404\\n    </div><div class=\"text-h2\" style=\"opacity:.4\">\\n      Oops. Nothing here...\\n    </div>'),o(\"q-btn\",{staticClass:\"q-mt-xl\",attrs:{color:\"white\",\"text-color\":\"blue\",unelevated:\"\",to:\"/\",label:\"Go Home\",\"no-caps\":\"\"}})],2)])},s=[],r={name:\"Error404\"},i=r,l=o(\"2877\"),a=o(\"7c52\"),c=o(\"eebe\"),d=o.n(c),p=Object(l[\"a\"])(i,n,s,!1,null,null,\"3696aa3d\");t[\"default\"]=p.exports;d()(p,\"components\",{QBtn:a[\"QBtn\"]})},eebe:function(e,t){e.exports=function(e,t,o){var n;if(\"function\"===typeof e.exports?(n=e.exports.extendOptions,n[t]=e.exports.options[t]):n=e.options,void 0===n[t])n[t]=o;else{var s=n[t];for(var r in o)void 0===s[r]&&(s[r]=o[r])}}}};",
    "server-bundle.js": "module.exports=function(e){var t={},n={0:0};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.e=function(t){var r=[];if(0!==n[t]){var o=require(\"./js/\"+({}[t]||t)+\".\"+{1:\"e18d1440\",2:\"8aa49786\"}[t]+\".js\"),a=o.modules,s=o.ids;for(var i in a)e[i]=a[i];for(var c=0;c<s.length;c++)n[s[c]]=0}return Promise.all(r)},r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e[\"default\"]}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"/\",r.oe=function(e){process.nextTick((function(){throw e}))},r(r.s=0)}({0:function(e,t,n){e.exports=n(\"4edf\")},\"0373\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return r})),n.d(t,\"d\",(function(){return o})),n.d(t,\"c\",(function(){return a})),n.d(t,\"b\",(function(){return s})),n.d(t,\"e\",(function(){return i})),n.d(t,\"f\",(function(){return c}));const r={UNKNOWN:\"UNKNOWN\",SERVANT:\"SERVANT\",MINION:\"MINION\",MERLIN:\"MERLIN\",PERCIVAL:\"PERCIVAL\",ASSASSIN:\"ASSASSIN\",MORGANA:\"MORGANA\",OBERON:\"OBERON\",MORDRED:\"MORDRED\",GOOD:\"GOOD\",EVIL:\"EVIL\"},o={UNKNOWN:\"未知\",SERVANT:\"忠臣\",MINION:\"爪牙\",MERLIN:\"梅林\",PERCIVAL:\"派西維爾\",ASSASSIN:\"刺客\",MORGANA:\"魔甘娜\",OBERON:\"奧柏倫\",MORDRED:\"莫德雷德\",GOD:\"湖中女神\",GOOD:\"正義陣營\",EVIL:\"邪惡陣營\"},a={UNKNOWN:\"unknown.jpg\",SERVANT:\"servant.jpg\",MINION:\"minion.jpg\",MERLIN:\"merlin.jpg\",PERCIVAL:\"percival.jpg\",ASSASSIN:\"assassin.jpg\",MORGANA:\"morcana.jpg\",OBERON:\"oberon.jpg\",MORDRED:\"mordred.jpg\",GOD:\"god.jpg\",GOOD:\"good.jpg\",EVIL:\"evil.jpg\"},s={SERVANT:\"(正義方)沒有能力的正義方角色，共有5張牌。\",MINION:\"(邪惡方)沒有能力的邪惡方角色，共有3張牌。\",MERLIN:\"(正義方)擁有知道所有邪惡方陣營玩家的能力，但不知道【莫德雷德】是誰。如果最後被【刺客】刺殺，邪惡方就會獲勝。\",PERCIVAL:\"(正義方)在遊戲開始時的辨識身份階段，可以知道誰是【梅林】。\",ASSASSIN:\"(邪惡方)當遊戲結束，邪惡方失敗時，可以刺殺【梅林】來反敗為勝。\",MORGANA:\"(邪惡方)在遊戲開始時的辨識身份階段，可以假扮成【梅林】，混淆【派西維爾】。\",OBERON:\"(邪惡方)屬於邪惡方角色，但是邪惡方陣營的玩家不曉得他的身份，他也不知道其他邪惡方的角色是誰。\",MORDRED:\"(邪惡方)可以不被【梅林】看到。\",GOD:\"遊戲開始時，將湖中女神給領袖右邊的玩家。第2、3、4回合，出完任務後才可以使用湖中女神能力。持有湖中女神指示物的玩家選擇要檢視的對象，但是不可以選擇之前被湖中女神能力看過的玩家。\"},i=e=>e===r.UNKNOWN?a.UNKNOWN:e===r.SERVANT?a.SERVANT:e===r.MINION?a.MINION:e===r.MERLIN?a.MERLIN:e===r.PERCIVAL?a.PERCIVAL:e===r.ASSASSIN?a.ASSASSIN:e===r.MORGANA?a.MORGANA:e===r.OBERON?a.OBERON:e===r.MORDRED?a.MORDRED:e===r.EVIL?a.EVIL:e===r.GOOD?a.GOOD:a.UNKNOWN,c=e=>e===r.SERVANT?o.SERVANT:e===r.MINION?o.MINION:e===r.MERLIN?o.MERLIN:e===r.PERCIVAL?o.PERCIVAL:e===r.ASSASSIN?o.ASSASSIN:e===r.MORGANA?o.MORGANA:e===r.OBERON?o.OBERON:e===r.MORDRED?o.MORDRED:e===r.EVIL?o.EVIL:e===r.GOOD?o.GOOD:o.UNKNOWN},\"1a25\":function(e,t){e.exports=require(\"core-js/modules/web.dom-collections.iterator.js\")},2877:function(e,t,n){\"use strict\";function r(e,t,n,r,o,a,s,i){var c,u=\"function\"===typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),a&&(u._scopeId=\"data-v-\"+a),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||\"undefined\"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=c):o&&(c=i?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}n.d(t,\"a\",(function(){return r}))},\"31cd\":function(e,t){e.exports={}},\"34c9\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return s})),n.d(t,\"c\",(function(){return i})),n.d(t,\"b\",(function(){return c})),n.d(t,\"d\",(function(){return u}));var r=n(\"cebe\"),o=n.n(r);const a=o.a.create({baseURL:\"https://avalonserver.herokuapp.com\",headers:{\"Content-Type\":\"application/json\"}}),s=e=>{const t=\"/room\";return a.post(t,e)},i=e=>{const t=`/game/${e}`;return a.get(t)},c=e=>{const t=`/host/${e}`;return a.get(t)},u=(e,t)=>{const n=`/join/${e}`;return a.post(n,t)}},\"4e2f\":function(e,t){e.exports={}},\"4edf\":function(e,t,n){\"use strict\";n.r(t);var r={};n.r(r),n.d(r,\"isLeader\",(function(){return y})),n.d(r,\"isTaskTeam\",(function(){return O})),n.d(r,\"isValidGamePlayerCount\",(function(){return N})),n.d(r,\"isSelectedTaskTeamPlayer\",(function(){return I})),n.d(r,\"isTaskTeamPlayer\",(function(){return h})),n.d(r,\"userRoleImage\",(function(){return v})),n.d(r,\"hasBasicGameInfo\",(function(){return P})),n.d(r,\"isHost\",(function(){return C})),n.d(r,\"isStarted\",(function(){return M})),n.d(r,\"isShowGameDialog\",(function(){return D})),n.d(r,\"isShowLoginDialog\",(function(){return w})),n.d(r,\"isShowConnectingDialog\",(function(){return b})),n.d(r,\"playerOrder\",(function(){return G})),n.d(r,\"isGoodWin\",(function(){return k}));var o={};n.r(o),n.d(o,\"setRoomId\",(function(){return U})),n.d(o,\"setUser\",(function(){return x})),n.d(o,\"setGameOver\",(function(){return K})),n.d(o,\"setMerlinKilled\",(function(){return $})),n.d(o,\"setIsConnectingGame\",(function(){return W})),n.d(o,\"setIsShowInviteDialog\",(function(){return Y})),n.d(o,\"resetBasicGameInfo\",(function(){return F})),n.d(o,\"setRole\",(function(){return z})),n.d(o,\"setLeader\",(function(){return q})),n.d(o,\"resetMessage\",(function(){return H})),n.d(o,\"addMessage\",(function(){return J})),n.d(o,\"shiftMessage\",(function(){return B})),n.d(o,\"setStatus\",(function(){return X})),n.d(o,\"setPlayerList\",(function(){return Q})),n.d(o,\"addPlayer\",(function(){return Z})),n.d(o,\"setOfflinePlayerList\",(function(){return ee})),n.d(o,\"addOfflinePlayer\",(function(){return te})),n.d(o,\"removeOfflinePlayer\",(function(){return ne})),n.d(o,\"updatePlayerRole\",(function(){return re})),n.d(o,\"revealAllPlayer\",(function(){return oe})),n.d(o,\"revealAssassin\",(function(){return ae})),n.d(o,\"revealEvilRole\",(function(){return se})),n.d(o,\"revealMerlin\",(function(){return ie})),n.d(o,\"updateUserRole\",(function(){return ce})),n.d(o,\"setTaskTeamList\",(function(){return ue})),n.d(o,\"resetTaskTeamList\",(function(){return le})),n.d(o,\"updateTaskResultList\",(function(){return de})),n.d(o,\"setTeamSize\",(function(){return fe})),n.d(o,\"setRound\",(function(){return Ee})),n.d(o,\"setSelectedTaskTeamList\",(function(){return _e})),n.d(o,\"resetSelectedTaskTeamList\",(function(){return Ae})),n.d(o,\"addSelectedTaskTeamPlayer\",(function(){return Le})),n.d(o,\"removeSelectedTaskTeamPlayer\",(function(){return pe})),n.d(o,\"setWebSocket\",(function(){return Se})),n.d(o,\"setRevealPlayer\",(function(){return Re})),n.d(o,\"setKillPlayer\",(function(){return me})),n.d(o,\"setRevealedPlayerList\",(function(){return Te})),n.d(o,\"setUnApproveCount\",(function(){return ge})),n.d(o,\"resetUnApproveCount\",(function(){return ye})),n.d(o,\"incrementReconnectCount\",(function(){return Oe})),n.d(o,\"resetReconnectCount\",(function(){return Ne}));var a={};n.r(a),n.d(a,\"createGameAction\",(function(){return Pe})),n.d(a,\"joinGameAction\",(function(){return Ce})),n.d(a,\"startGameAction\",(function(){return Me})),n.d(a,\"assignTaskTeamAction\",(function(){return De})),n.d(a,\"voteTaskAction\",(function(){return we})),n.d(a,\"approveAction\",(function(){return be})),n.d(a,\"assignRevealPlayerAction\",(function(){return Ge})),n.d(a,\"assignGodStatementAction\",(function(){return ke})),n.d(a,\"assignKillPlayerAction\",(function(){return Ve})),n.d(a,\"fetchGameInfoAction\",(function(){return je})),n.d(a,\"handleJoinGameAction\",(function(){return Ue}));n(\"b7ac\"),n(\"7d6e\"),n(\"e54f\"),n(\"985d\"),n(\"4e2f\"),n(\"31cd\");var s=n(\"8bbf\"),i=n.n(s),c={isoName:\"en-us\",nativeName:\"English (US)\",label:{clear:\"Clear\",ok:\"OK\",cancel:\"Cancel\",close:\"Close\",set:\"Set\",select:\"Select\",reset:\"Reset\",remove:\"Remove\",update:\"Update\",create:\"Create\",search:\"Search\",filter:\"Filter\",refresh:\"Refresh\"},date:{days:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),daysShort:\"Sun_Mon_Tue_Wed_Thu_Fri_Sat\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),monthsShort:\"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec\".split(\"_\"),firstDayOfWeek:0,format24h:!1,pluralDay:\"days\"},table:{noData:\"No data available\",noResults:\"No matching records found\",loading:\"Loading...\",selectedRecords:function(e){return 1===e?\"1 record selected.\":(0===e?\"No\":e)+\" records selected.\"},recordsPerPage:\"Records per page:\",allRows:\"All\",pagination:function(e,t,n){return e+\"-\"+t+\" of \"+n},columns:\"Columns\"},editor:{url:\"URL\",bold:\"Bold\",italic:\"Italic\",strikethrough:\"Strikethrough\",underline:\"Underline\",unorderedList:\"Unordered List\",orderedList:\"Ordered List\",subscript:\"Subscript\",superscript:\"Superscript\",hyperlink:\"Hyperlink\",toggleFullscreen:\"Toggle Fullscreen\",quote:\"Quote\",left:\"Left align\",center:\"Center align\",right:\"Right align\",justify:\"Justify align\",print:\"Print\",outdent:\"Decrease indentation\",indent:\"Increase indentation\",removeFormat:\"Remove formatting\",formatting:\"Formatting\",fontSize:\"Font Size\",align:\"Align\",hr:\"Insert Horizontal Rule\",undo:\"Undo\",redo:\"Redo\",heading1:\"Heading 1\",heading2:\"Heading 2\",heading3:\"Heading 3\",heading4:\"Heading 4\",heading5:\"Heading 5\",heading6:\"Heading 6\",paragraph:\"Paragraph\",code:\"Code\",size1:\"Very small\",size2:\"A bit small\",size3:\"Normal\",size4:\"Medium-large\",size5:\"Big\",size6:\"Very big\",size7:\"Maximum\",defaultFont:\"Default Font\",viewSource:\"View Source\"},tree:{noNodes:\"No nodes available\",noResults:\"No matching nodes found\"}},u={name:\"material-icons\",type:{positive:\"check_circle\",negative:\"warning\",info:\"info\",warning:\"priority_high\"},arrow:{up:\"arrow_upward\",right:\"arrow_forward\",down:\"arrow_downward\",left:\"arrow_back\",dropdown:\"arrow_drop_down\"},chevron:{left:\"chevron_left\",right:\"chevron_right\"},colorPicker:{spectrum:\"gradient\",tune:\"tune\",palette:\"style\"},pullToRefresh:{icon:\"refresh\"},carousel:{left:\"chevron_left\",right:\"chevron_right\",up:\"keyboard_arrow_up\",down:\"keyboard_arrow_down\",navigationIcon:\"lens\"},chip:{remove:\"cancel\",selected:\"check\"},datetime:{arrowLeft:\"chevron_left\",arrowRight:\"chevron_right\",now:\"access_time\",today:\"today\"},editor:{bold:\"format_bold\",italic:\"format_italic\",strikethrough:\"strikethrough_s\",underline:\"format_underlined\",unorderedList:\"format_list_bulleted\",orderedList:\"format_list_numbered\",subscript:\"vertical_align_bottom\",superscript:\"vertical_align_top\",hyperlink:\"link\",toggleFullscreen:\"fullscreen\",quote:\"format_quote\",left:\"format_align_left\",center:\"format_align_center\",right:\"format_align_right\",justify:\"format_align_justify\",print:\"print\",outdent:\"format_indent_decrease\",indent:\"format_indent_increase\",removeFormat:\"format_clear\",formatting:\"text_format\",fontSize:\"format_size\",align:\"format_align_left\",hr:\"remove\",undo:\"undo\",redo:\"redo\",heading:\"format_size\",code:\"code\",size:\"format_size\",font:\"font_download\",viewSource:\"code\"},expansionItem:{icon:\"keyboard_arrow_down\",denseIcon:\"arrow_drop_down\"},fab:{icon:\"add\",activeIcon:\"close\"},field:{clear:\"cancel\",error:\"error\"},pagination:{first:\"first_page\",prev:\"keyboard_arrow_left\",next:\"keyboard_arrow_right\",last:\"last_page\"},rating:{icon:\"grade\"},stepper:{done:\"check\",active:\"edit\",error:\"warning\"},tabs:{left:\"chevron_left\",right:\"chevron_right\",up:\"keyboard_arrow_up\",down:\"keyboard_arrow_down\"},table:{arrowUp:\"arrow_upward\",warning:\"warning\",firstPage:\"first_page\",prevPage:\"chevron_left\",nextPage:\"chevron_right\",lastPage:\"last_page\"},tree:{icon:\"play_arrow\"},uploader:{done:\"done\",clear:\"clear\",add:\"add_box\",upload:\"cloud_upload\",removeQueue:\"clear_all\",removeUploaded:\"done_all\"}},l=n(\"7c52\");i.a.use(l[\"Quasar\"],{config:{notify:{timeout:\"1000\",position:\"center\"}},lang:c,iconSet:u,plugins:{Notify:l[\"Notify\"],Cookies:l[\"Cookies\"],LocalStorage:l[\"LocalStorage\"],Meta:l[\"Meta\"]}});var d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{attrs:{id:\"q-app\"}},[n(\"router-view\")],1)},f=[],E={name:\"App\"},_=E,A=n(\"2877\"),L=Object(A[\"a\"])(_,d,f,!1,null,null,\"4c02596f\"),p=L.exports,S=n(\"5880\"),R=n.n(S),m=n(\"0373\"),T=n(\"6ffa\");function g(){return{roomId:\"\",user:\"\",role:m[\"a\"].UNKNOWN,leader:\"\",playerList:[],taskTeamList:[],taskResultList:[],messageList:[\"等待玩家就位，遊戲人數 5 ~ 10\"],status:T[\"a\"].WAIT_START,selectedTaskTeamList:[],teamSize:0,round:0,webSocket:null,revealPlayer:\"\",killPlayer:\"\",revealedPlayerList:[],unApproveCount:0,offlinePlayerList:[],isGameOver:!1,isMerlinKilled:!1,isConnectingGame:!1,isShowInviteDialog:!1,reconnectCount:0}}function y(e){return t=>e.leader===t}function O(e){return e.taskTeamList.includes(e.user)}function N(e){const t=e.playerList.length;return t>=5&&t<=10}function I(e){return t=>e.selectedTaskTeamList.includes(t)}function h(e){return t=>e.taskTeamList.includes(t)}function v(e){return Object(m[\"e\"])(e.role)}function P(e){return\"\"!==e.roomId&&\"\"!==e.user}function C(e){const t=e.playerList[0];return void 0!==t&&t.name===e.user}function M(e){return e.round>0}function D(e){return!e.isGameOver&&e.offlinePlayerList.length>0}function w(e){return!e.isGameOver&&(\"\"===e.roomId||\"\"===e.user)}function b(e){return!e.isGameOver&&(!(!e.roomId||!e.user)&&null===e.webSocket)}function G(e){return t=>{for(let n=0;n<e.playerList.length;n+=1){const r=e.playerList[n];if(r.name===t)return n+1}return 0}}function k(e){return 5!==e.unApproveCount&&!e.isMerlinKilled&&e.taskResultList.filter((e=>!!e)).length>=3}var V=n(\"ded3\"),j=n.n(V);n(\"6378\");function U(e,t){e.roomId=t}function x(e,t){e.user=t}function K(e){e.isGameOver=!0}function $(e){e.isMerlinKilled=!0}function W(e,t){e.isConnectingGame=t}function Y(e,t){e.isShowInviteDialog=t}function F(e){e.roomId=\"\",e.user=\"\"}function z(e,t){e.role=t}function q(e,t){e.leader=t}function H(e){e.messageList=[]}function J(e,t){const n=e.user?t.replace(e.user,\"您\"):t;e.messageList.push(n)}function B(e){e.messageList.shift()}function X(e,t){e.status=t}function Q(e,t){e.playerList=t}function Z(e,t){e.playerList.push({name:t,role:m[\"a\"].UNKNOWN})}function ee(e,t){e.offlinePlayerList=t}function te(e,t){e.offlinePlayerList.push(t)}function ne(e,t){for(let n=0;n<e.offlinePlayerList.length;n+=1)if(t===e.offlinePlayerList[n])return void e.offlinePlayerList.splice(n,1)}function re(e,{name:t,role:n}){const r=e.playerList;for(let o=0;o<r.length;o+=1){const a=r[o];if(a.name===t)return void e.playerList.splice(o,1,{name:t,role:n})}}function oe(e,t){const n=e.playerList;for(let r=0;r<n.length;r+=1){const o=n[r];e.playerList.splice(r,1,{name:o.name,role:t[o.name]})}}function ae(e,t){const n=e.playerList;for(let r=0;r<n.length;r+=1){const o=n[r];if(o.name===t)return void e.playerList.splice(r,1,{name:t,role:m[\"a\"].ASSASSIN})}}function se(e,t){const n=e.playerList;for(let r=0;r<n.length;r+=1){const o=n[r];t.includes(o.name)&&o.role===m[\"a\"].UNKNOWN&&e.playerList.splice(r,1,j()(j()({},o),{},{role:m[\"a\"].EVIL}))}}function ie(e,t){const n=e.playerList;for(let r=0;r<n.length;r+=1){const o=n[r];t.includes(o.name)&&e.playerList.splice(r,1,j()(j()({},o),{},{role:m[\"a\"].MERLIN}))}}function ce(e,t){const n=e.playerList;for(let r=0;r<n.length;r+=1){const o=n[r];if(o.name===e.user)return void e.playerList.splice(r,1,{name:e.user,role:t})}}function ue(e,t){e.taskTeamList=t}function le(e){e.taskTeamList=[]}function de(e,t){e.taskResultList=t}function fe(e,t){e.teamSize=t}function Ee(e,t){e.round=t}function _e(e,t){e.selectedTaskTeamList=t}function Ae(e){e.selectedTaskTeamList=[]}function Le(e,t){const n=e.selectedTaskTeamList.slice(0,e.teamSize-1);n.unshift(t),e.selectedTaskTeamList=n}function pe(e,t){const n=e.selectedTaskTeamList;for(let r=0;r<n.length;r+=1)if(n[r]===t)return void e.selectedTaskTeamList.splice(r,1)}function Se(e,t){e.webSocket=t}function Re(e,t){e.revealPlayer=t}function me(e,t){e.killPlayer=t}function Te(e,t){e.revealedPlayerList=t}function ge(e,t){e.unApproveCount=t}function ye(e){e.unApproveCount=0}function Oe(e){e.reconnectCount+=1}function Ne(e){e.reconnectCount=0}var Ie=n(\"34c9\");const he={START:\"START\",DECLARE_PLAYER:\"DECLARE_PLAYER\",DECLARE_ROUND:\"DECLARE_ROUND\",DECLARE_TEAM_SIZE:\"DECLARE_TEAM_SIZE\",DECLARE_TEAM:\"DECLARE_TEAM\",DECLARE_ROLE:\"DECLARE_ROLE\",REVEAL_EVIL:\"REVEAL_EVIL\",REVEAL_MERLIN:\"REVEAL_MERLIN\",REVEAL_EVIL_EACH:\"REVEAL_EVIL_EACH\",DECLARE_LEADER:\"DECLARE_LEADER\",ASSIGN_TEAM:\"ASSIGN_TEAM\",ASSIGN_TASK:\"ASSIGN_TASK\",VOTE:\"VOTE\",APPROVE:\"APPROVE\",DECLARE_TASK_RESULT:\"DECLARE_TASK_RESULT\",ASSIGN_GOD:\"ASSIGN_GOD\",ASSIGN_REVEAL_PLAYER:\"ASSIGN_REVEAL_PLAYER\",REVEAL_PLAYER:\"REVEAL_PLAYER\",ASSIGN_GOD_STATEMENT:\"ASSIGN_GOD_STATEMENT\",DECLARE_GOD_STATEMENT:\"DECLARE_GOD_STATEMENT\",DECLARE_TASK_LIST:\"DECLARE_TASK_LIST\",DECLARE_APPROVAL_RESULT:\"DECLARE_APPROVAL_RESULT\",DECLARE_APPROVAL_LIST:\"DECLARE_APPROVAL_LIST\",DECLARE_UNAPPROVAL_COUNT:\"DECLARE_UNAPPROVAL_COUNT\",DECLARE_REVEALED_PLAYER_LIST:\"DECLARE_REVEALED_PLAYER_LIST\",DECLARE_ASSASSIN:\"DECLARE_ASSASSIN\",DECLARE_KILL_RESULT:\"DECLARE_KILL_RESULT\",ASSIGN_KILL_PLAYER:\"ASSIGN_KILL_PLAYER\",DECLARE_GAME_RESULT:\"DECLARE_GAME_RESULT\",DECLARE_OFFLINE:\"DECLARE_OFFLINE\",DECLARE_PLAYER_RETURN:\"DECLARE_PLAYER_RETURN\",DECLARE_GAME_INFO:\"DECLARE_GAME_INFO\"},ve={OK:100,GAME_NOT_EXIST:99,PLAYER_EXIST:98,GAME_HAS_START:97,NO_SPACE:96};async function Pe({dispatch:e,commit:t},{player:n,handleSuccess:r,handleError:o}){try{t(\"setIsConnectingGame\",!0);const a={player_name:n},s=await Object(Ie[\"a\"])(a),i=s.data.room_id;if(!i)throw new Error;e(\"joinGameAction\",{player:n,roomId:i,handleSuccess:r,handleError:o})}catch(a){t(\"setIsConnectingGame\",!1),o()}}async function Ce({commit:e,state:t,getters:n,dispatch:r},{player:o,roomId:a,handleSuccess:s,handleError:i}){try{e(\"setIsConnectingGame\",!0);const c=`wss://avalonserver.herokuapp.com/${a}/${o}`,u=new WebSocket(c);u.addEventListener(\"open\",(()=>{window.clearInterval(window.socketTimer),e(\"setWebSocket\",u),e(\"setRoomId\",a),e(\"setUser\",o),e(\"setIsConnectingGame\",!1),s(a),e(\"resetReconnectCount\"),window.socketTimer=setInterval((()=>{u.send(\"check\")}),5e4)})),u.addEventListener(\"message\",(r=>{let o;try{if(o=JSON.parse(r.data),!o.type)throw new Error}catch(i){o=null}if(null===o)return;const{type:a,payload:s}=o;if(a===he.DECLARE_PLAYER){const t=s.map((e=>({name:e,role:m[\"a\"].UNKNOWN})));e(\"setPlayerList\",t)}else if(a===he.DECLARE_ROUND)e(\"setRound\",s);else if(a===he.DECLARE_ROLE)e(\"setRole\",s),e(\"updateUserRole\",s),e(\"resetMessage\"),e(\"addMessage\",`你的角色為 ${Object(m[\"f\"])(s)}`);else if(a===he.REVEAL_EVIL)e(\"revealEvilRole\",s),e(\"addMessage\",`${s.join(\", \")} 為邪惡陣營`);else if(a===he.REVEAL_MERLIN)e(\"revealMerlin\",s),e(\"addMessage\",`${s.join(\", \")} 的身份為梅林？`);else if(a===he.REVEAL_EVIL_EACH){e(\"revealEvilRole\",s);const t=s.length>1?`${s.join(\", \")} 為同夥`:\"您沒有同夥\";e(\"addMessage\",t)}else if(a===he.DECLARE_LEADER)e(\"resetSelectedTaskTeamList\"),e(\"resetTaskTeamList\"),e(\"setLeader\",s),s===t.user?(e(\"addMessage\",`請選擇 ${t.teamSize} 位出任務玩家`),e(\"setStatus\",T[\"a\"].SELECT_TASK_PLAYER)):e(\"addMessage\",`等待 ${s} 指派玩家`);else if(a===he.DECLARE_TEAM_SIZE)e(\"setTeamSize\",s);else if(a===he.DECLARE_TEAM)e(\"setTaskTeamList\",s),e(\"resetMessage\"),e(\"addMessage\",`本回出任務玩家${s.join(\", \")}`),e(\"setStatus\",T[\"a\"].APPROVE);else if(a===he.DECLARE_TASK_RESULT){const t=`${s.failCount} 票反對，`,n=s.result?\"任務成功\":\"任務失敗\",r=t+n;e(\"resetMessage\"),e(\"resetTaskTeamList\"),e(\"resetSelectedTaskTeamList\"),e(\"addMessage\",r)}else if(a===he.DECLARE_TASK_LIST)e(\"updateTaskResultList\",s);else if(a===he.ASSIGN_TASK)e(\"setSelectedTaskTeamList\",s),s.includes(t.user)?(e(\"addMessage\",\"請出任務\"),e(\"setStatus\",T[\"a\"].VOTE)):e(\"addMessage\",`${s.join(\", \")} 出任務中`);else if(a===he.DECLARE_GOD_STATEMENT)e(\"setStatus\",T[\"a\"].WAIT),e(\"addMessage\",`${s.god} 表示 ${s.player} 是 ${s.isGood?\"亞瑟的忠臣\":\"莫德雷德的爪牙\"}`);else if(a===he.ASSIGN_GOD){const n=t.user===s,r=n?T[\"a\"].SELECT_REVEAL_PLAYER:T[\"a\"].WAIT,o=n?\"湖中女神出現，請選擇你想檢視的玩家\":\"湖中女神出現，等待湖中女神的指示\";e(\"resetSelectedTaskTeamList\"),e(\"resetTaskTeamList\"),e(\"setStatus\",r),e(\"addMessage\",o)}else if(a===he.DECLARE_REVEALED_PLAYER_LIST)e(\"setRevealedPlayerList\",s);else if(a===he.DECLARE_APPROVAL_LIST){e(\"resetMessage\");const r=s.filter((e=>!e.result)).map((e=>e.player)),o=r.length<t.playerList.length/2,a=o?\"投票通過\":\"投票不通過\",i=r.length>0?`${r.join(\", \")} 表示反對`:\"無人反對\",c=o?\"任務玩家請投票\":\"\",u=`${a},${i} ${c}`,l=o&&n.isTaskTeam?T[\"a\"].VOTE:T[\"a\"].WAIT;e(\"addMessage\",u),e(\"setStatus\",l)}else if(a===he.REVEAL_PLAYER){e(\"resetMessage\");const t=s.player,n=s.isGood?m[\"a\"].GOOD:m[\"a\"].EVIL,r=`${t} 角色是 ${s.isGood?\"忠臣\":\"爪牙\"} ，你想告訴大家？`;e(\"updatePlayerRole\",{name:t,role:n}),e(\"addMessage\",r),e(\"setStatus\",T[\"a\"].ASSIGN_GOD_STATEMENT)}else if(a===he.DECLARE_UNAPPROVAL_COUNT)e(\"setUnApproveCount\",s);else if(a===he.DECLARE_ASSASSIN){e(\"revealAssassin\",s);const n=s===t.user,r=n?T[\"a\"].SELECT_KILL_PLAYER:T[\"a\"].WAIT;e(\"setStatus\",r);const o=n?\"請選擇要刺殺的玩家\":\"\",a=`刺客登場( ${s} ) ！！！ 梅林危險了 ${o}`;e(\"addMessage\",a)}else if(a===he.DECLARE_GAME_RESULT){const{result:n,isMerlinKilled:r,role:o}=s,a=n?\"正義陣營獲勝\":\"邪惡陣營獲勝\",i=r?\"梅林遭到刺殺!!!\":\"\",c=a+i;e(\"setStatus\",T[\"a\"].END),e(\"revealAllPlayer\",o),e(\"addMessage\",c),e(\"setGameOver\"),t.webSocket.close()}else if(a===he.DECLARE_OFFLINE)e(\"addOfflinePlayer\",s);else if(a===he.DECLARE_PLAYER_RETURN)e(\"removeOfflinePlayer\",s);else if(a===he.DECLARE_GAME_INFO){const{role:n,leader:r,teamSize:o,playerList:a,merlins:i,evils:c,taskList:u,unApproveCount:l,teamMemberList:d,revealedPlayerList:f,status:E,isRevealedPlayerGood:_}=s;e(\"setRole\",n),e(\"setLeader\",r),e(\"setTeamSize\",o),e(\"setPlayerList\",a.map((e=>({name:e,role:e===t.user?n:m[\"a\"].UNKNOWN})))),e(\"revealMerlin\",i),e(\"revealEvilRole\",c),e(\"updateTaskResultList\",u),e(\"setTaskTeamList\",d),e(\"setUnApproveCount\",l),e(\"setRevealedPlayerList\",f),e(\"setStatus\",E),e(\"resetMessage\"),e(\"addMessage\",\"連線成功！！\"),E===T[\"a\"].VOTE?e(\"addMessage\",\"任務玩家請投票\"):E===T[\"a\"].APPROVE?e(\"addMessage\",`本回出任務玩家${d.join(\", \")}`):E===T[\"a\"].SELECT_TASK_PLAYER?e(\"addMessage\",`請選擇 ${o} 位出任務玩家`):E===T[\"a\"].SELECT_REVEAL_PLAYER?e(\"addMessage\",\"湖中女神出現，請選擇你想檢視的玩家\"):E===T[\"a\"].SELECT_KILL_PLAYER?e(\"addMessage\",\"請選擇要刺殺的玩家\"):E===T[\"a\"].ASSIGN_GOD_STATEMENT?e(\"addMessage\",`${f[f.length-1]} 角色是 ${_?\"忠臣\":\"爪牙\"} ，你想告訴大家？`):E===T[\"a\"].WAIT&&e(\"addMessage\",\"等待其他玩家動作\")}else if(a===he.DECLARE_KILL_RESULT){const t=s,n=t?\"刺殺成功\":\"刺殺失敗\";e(\"addMessage\",n)}})),u.addEventListener(\"error\",(()=>{e(\"setIsConnectingGame\",!1),e(\"setWebSocket\",null),window.clearInterval(window.socketTimer)})),u.addEventListener(\"close\",(()=>{window.clearInterval(window.socketTimer),e(\"setIsConnectingGame\",!1),e(\"setWebSocket\",null),e(\"incrementReconnectCount\"),t.reconnectCount<=3&&t.roomId&&t.user&&!1===t.isGameOver&&r(\"joinGameAction\",{player:t.user,roomId:t.roomId,handleSuccess:()=>{},handleError:()=>{}}),t.user&&t.roomId||i()}))}catch(c){i(),e(\"setIsConnectingGame\",!1)}}async function Me({state:e,commit:t}){try{t(\"setStatus\",T[\"a\"].WAIT);const n={type:he.START},r=e.webSocket;r.send(JSON.stringify(n))}catch(n){}}async function De({state:e,commit:t}){try{t(\"setStatus\",T[\"a\"].WAIT);const n={type:he.ASSIGN_TEAM,payload:e.selectedTaskTeamList},r=e.webSocket;r.send(JSON.stringify(n)),t(\"resetSelectedTaskTeamList\")}catch(n){}}async function we({state:e,commit:t},n){try{t(\"setStatus\",T[\"a\"].WAIT);const r={type:he.VOTE,payload:n},o=e.webSocket;o.send(JSON.stringify(r))}catch(r){}}async function be({state:e,commit:t},n){try{t(\"setStatus\",T[\"a\"].WAIT);const r={type:he.APPROVE,payload:n},o=e.webSocket;o.send(JSON.stringify(r))}catch(r){}}async function Ge({state:e,commit:t}){try{t(\"setStatus\",T[\"a\"].WAIT);const n={type:he.ASSIGN_REVEAL_PLAYER,payload:e.revealPlayer},r=e.webSocket;r.send(JSON.stringify(n))}catch(n){}}async function ke({state:e,commit:t},n){try{t(\"setStatus\",T[\"a\"].WAIT);const r={god:e.user,isGood:n,player:e.revealPlayer},o={type:he.ASSIGN_GOD_STATEMENT,payload:r},a=e.webSocket;a.send(JSON.stringify(o)),t(\"setRevealPlayer\",\"\")}catch(r){}}async function Ve({state:e,commit:t}){try{t(\"setStatus\",T[\"a\"].WAIT);const n={type:he.ASSIGN_KILL_PLAYER,payload:e.killPlayer},r=e.webSocket;r.send(JSON.stringify(n))}catch(n){}}async function je({commit:e,getters:t},n){try{const r=await Object(Ie[\"c\"])(n),{player_info:o,tasks:a,killed:s,un_approve_count:i}=r.data,c=Object.keys(o).map((e=>({name:e,role:o[e]})));e(\"setPlayerList\",c),e(\"setUnApproveCount\",i),e(\"updateTaskResultList\",a),s&&e(\"setMerlinKilled\"),e(\"setGameOver\"),e(\"resetMessage\");const u=t.isGoodWin?\"遊戲結束，正義陣營獲得勝利\":\"遊戲結束，邪惡陣營獲得勝利\",l=s?\" 梅林遭到刺殺\":\"\";e(\"addMessage\",u+l)}catch(r){}}async function Ue({commit:e,dispatch:t},{roomId:n,player:r,handleSuccess:o,handleError:a}){try{e(\"setIsConnectingGame\",!0);const s={player_name:r},i=await Object(Ie[\"d\"])(n,s),c=i.data.join_code;if(c===ve.GAME_NOT_EXIST)throw new Error(\"遊戲不存在！\");if(c===ve.PLAYER_EXIST)throw new Error(`${r}已經在遊戲中，換個名字試試吧！`);if(c===ve.NO_SPACE)throw new Error(\"遊戲玩家已達上限！\");if(c===ve.GAME_HAS_START)throw new Error(\"遊戲進行中！\");if(c!==ve.OK)throw new Error;t(\"joinGameAction\",{player:r,roomId:n,handleSuccess:o,handleError:a})}catch(s){a(s.message),e(\"setIsConnectingGame\",!1)}}var xe={namespaced:!0,state:g,getters:r,mutations:o,actions:a};i.a.use(R.a);var Ke=()=>{const e=new R.a.Store({modules:{game:xe},strict:!1});return e},$e=n(\"6389\"),We=n.n($e);n(\"1a25\");const Ye=[{path:\"/:roomId?\",component:()=>n.e(1).then(n.bind(null,\"bda9\"))},{path:\"*\",component:()=>n.e(2).then(n.bind(null,\"e51e\"))}];var Fe=Ye;i.a.use(We.a);var ze=function(){const e=new We.a({scrollBehavior:()=>({x:0,y:0}),routes:Fe,mode:\"history\",base:\"/\"});return e},qe=async function(e){const t=\"function\"===typeof Ke?await Ke({Vue:i.a,ssrContext:e}):Ke,n=\"function\"===typeof ze?await ze({Vue:i.a,ssrContext:e,store:t}):ze;t.$router=n;const r={router:n,store:t,render:e=>e(p)};return l[\"Quasar\"].ssrUpdate({app:r,ssr:e}),{app:r,store:t,router:n}},He=n(\"85b3\"),Je=n.n(He),Be={failed:\"Action failed\",success:\"Action was successful\"},Xe={\"en-us\":Be};i.a.use(Je.a);const Qe=new Je.a({locale:\"en-us\",fallbackLocale:\"en-us\",messages:Xe});var Ze=({app:e})=>{e.i18n=Qe},et=n(\"cebe\"),tt=n.n(et);i.a.prototype.$axios=tt.a;const nt=p.options||p,rt=\"/\";function ot(e,t,n,r){const o=Object(e)===e?t.resolve(e).route.fullPath:e;n({url:o,code:r})}t[\"default\"]=e=>new Promise((async(t,n)=>{const{app:r,store:o,router:a}=await qe(e);let s=!1;const c=(e,t)=>{s=!0,ot(e,a,n,t)},u=[Ze,void 0];for(let E=0;!1===s&&E<u.length;E++)if(\"function\"===typeof u[E])try{await u[E]({app:r,router:a,store:o,Vue:i.a,ssrContext:e,redirect:c,urlPath:e.url,publicPath:rt})}catch(f){return void n(f)}if(!0===s)return;const l=e.url,{fullPath:d}=a.resolve(l).route;if(d!==l)return n({url:d});a.push(l).catch((()=>{})),a.onReady((()=>{const s=a.getMatchedComponents().map((e=>e.options||e));if(0===s.length)return n({code:404});let c=!1;const u=(e,t)=>{c=!0,ot(e,a,n,t)};void 0!==nt.preFetch&&s.unshift(nt),s.filter((e=>e&&e.preFetch)).reduce(((t,n)=>t.then((()=>!1===c&&n.preFetch({store:o,ssrContext:e,currentRoute:a.currentRoute,redirect:u,urlPath:e.url,publicPath:rt})))),Promise.resolve()).then((()=>{if(!0===c)return;e.state=o.state;const n=new i.a(r);e.$getMetaHTML=n.$getMetaHTML(n),t(n)})).catch(n)}),n)}))},5880:function(e,t){e.exports=require(\"vuex\")},6378:function(e,t){e.exports=require(\"core-js/modules/es.string.replace.js\")},6389:function(e,t){e.exports=require(\"vue-router\")},\"6ffa\":function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return r}));const r={WAIT_START:\"WAIT_START\",WAIT:\"WAIT\",VOTE:\"VOTE\",APPROVE:\"APPROVE\",SELECT_TASK_PLAYER:\"SELECT_TASK_PLAYER\",SELECT_REVEAL_PLAYER:\"SELECT_REVEAL_PLAYER\",SELECT_KILL_PLAYER:\"SELECT_KILL_PLAYER\",ASSIGN_GOD_STATEMENT:\"ASSIGN_GOD_STATEMENT\",END:\"END\"}},\"736c\":function(e,t){e.exports=require(\"qrcode\")},\"7c52\":function(e,t){e.exports=require(\"quasar\")},\"7d6e\":function(e,t){e.exports={}},\"85b3\":function(e,t){e.exports=require(\"vue-i18n\")},\"8bbf\":function(e,t){e.exports=require(\"vue\")},9523:function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n,e.exports[\"default\"]=e.exports,e.exports.__esModule=!0},\"985d\":function(e,t){e.exports={}},b7ac:function(e,t){e.exports=require(\"core-js/modules/es.array.reduce.js\")},cebe:function(e,t){e.exports=require(\"axios\")},ded3:function(e,t,n){var r=n(\"9523\");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e.exports=a,e.exports[\"default\"]=e.exports,e.exports.__esModule=!0},e54f:function(e,t){e.exports={}}});"
  },
  "maps": {}
}
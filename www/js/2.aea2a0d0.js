(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"3d4e":function(e,t,a){},ab46:function(e,t,a){"use strict";a("3d4e")},bda9:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh lpR fFf"}},[a("GameHeader"),a("q-page-container",[a("q-page",{staticClass:"bg-blue-grey-2",attrs:{"style-fn":e.myTweak,padding:""}},[a("PlayerList"),a("GameDialog"),a("GameConnectingDialog"),a("LoginDialog"),a("GameRoleDialog",{ref:"gameRoleDialog"}),a("InviteDialog",{ref:"inviteDialog"}),a("q-dialog",{attrs:{persistent:""},model:{value:e.confirm,callback:function(t){e.confirm=t},expression:"confirm"}},[a("q-card",{staticStyle:{"min-width":"350px"},attrs:{dark:""}},[a("q-card-section",{staticClass:"text-h6 text-bold text-center"},[e._v("\n            確定離開遊戲 ?\n          ")]),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"確定",color:"primary"},on:{click:e.handleLaeveGame}})],1)],1)],1),a("q-page-sticky",{attrs:{position:"bottom-right"}},[a("div",{staticClass:"row q-gutter-md q-mr-md q-mb-xs"},[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"help_outline",size:"sm",color:"blue-grey-9"},on:{click:e.handleQuestionclick}}),a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"person_add",size:"sm",color:"blue-grey-9",disable:e.isGameOver},on:{click:e.handleInviteclick}}),a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"exit_to_app",size:"sm",color:"blue-grey-9"},on:{click:e.showLeaveDialog}})],1)])],1)],1),a("GameFooter")],1)},i=[],n=a("ded3"),o=a.n(n),r=(a("5319"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-header",{staticClass:"bg-blue-grey-9",attrs:{elevated:"",bordered:""}},[a("q-item",{staticClass:"q-pa-sm",attrs:{dense:""}},[e.roomId&&e.user?a("q-item-section",{staticClass:"gt-xs",attrs:{avatar:""}},[a("div",{staticStyle:{width:"100px"}},[a("div",{staticClass:"text-bold ellipsis full-width"},[e._v("\n          房號: "+e._s(e.roomId)+"\n        ")]),a("q-img",{attrs:{src:e.userRoleImage,width:"100px",height:"140px"}}),a("div",{staticClass:"text-bold fz-sm ellipsis full-width text-center"},[e._v("\n          "+e._s(e.user)+"\n        ")])],1)]):e._e(),a("q-item-section",[a("q-item-label",{directives:[{name:"show",rawName:"v-show",value:e.roomId,expression:"roomId"}],staticClass:"q-pa-sm text-bold lt-sm"},[e._v("\n        房號: "+e._s(e.roomId)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.user,expression:"user"}]},[e._v("("+e._s(e.user)+")")])]),a("div",{staticClass:"flex justify-center",staticStyle:{"min-height":"80px"}},e._l(5,(function(t){return a("div",{key:t,staticClass:"flex",class:t%2===0?"":"content-end"},[a("q-avatar",{staticClass:"q-mx-sm text-no-wrap shadow-24 flex flex-center",attrs:{size:"55px","font-size":"18px",color:"black","text-color":"white"}},[!1===e.taskResultList[t-1]?a("img",{attrs:{src:"score_fail.jpg"}}):!0===e.taskResultList[t-1]?a("img",{attrs:{src:"score_success.jpg"}}):void 0===e.taskResultList[t-1]?[e._v("\n              任務"+e._s(t)+"\n            ")]:e._e()],2)],1)})),0),a("div",{staticClass:"row q-pt-md justify-center"},e._l(5,(function(t){return a("div",{key:t,staticClass:"flex flex-center"},[a("q-avatar",{staticClass:"q-mx-sm relative-position overflow-hidden",attrs:{size:"30px",color:"black","text-color":"white"}},[a("img",{attrs:{src:"unapprove.jpg"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t>e.unApproveCount,expression:"n > unApproveCount"}],staticClass:"fit bg-black absolute",staticStyle:{opacity:"0.7"}})])],1)})),0)],1)],1)],1)}),l=[],c=a("2f62"),m={name:"GameHeader",computed:o()(o()({},Object(c["c"])("game",["userRoleImage"])),Object(c["e"])("game",["roomId","taskResultList","user","unApproveCount"]))},d=m,h=a("2877"),p=a("e359"),u=a("66e5"),g=a("4074"),v=a("068f"),b=a("0170"),y=a("cb32"),w=a("eebe"),S=a.n(w),f=Object(h["a"])(d,r,l,!1,null,null,null),q=f.exports;S()(f,"components",{QHeader:p["a"],QItem:u["a"],QItemSection:g["a"],QImg:v["a"],QItemLabel:b["a"],QAvatar:y["a"]});var C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-footer",{staticClass:"bg-white text-black q-pa-md",attrs:{elevated:"",bordered:""}},[a("q-item",{staticClass:"q-pa-none"},[a("q-item-section",[a("GameMessageList")],1),a("q-item-section",{attrs:{side:"",top:""}},[a("GameOperateButton")],1)],1)],1)},x=[],k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit fz-md relative-position",on:{click:e.handleNextMessage}},[a("MessageBoard",{attrs:{message:e.messageBoaredText}}),e.hasNextMessage?a("q-icon",{staticClass:"absolute-bottom-right cursor-pointer",attrs:{id:"next-button",name:"arrow_drop_down",size:"lg"}}):e._e()],1)},_=[],I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit"},[e._v("\n  "+e._s(e.text)+"\n")])},T=[],L={name:"MessageBoard",props:{message:{type:String,required:!0}},data(){return{delayMilliSencond:80,timer:null,textCount:0}},computed:{text(){return this.message?this.message.substr(0,this.textCount):""}},watch:{message(e){this.textCount=1,clearInterval(this.timer),e&&this.setTypeMessageTimer()}},mounted(){this.setTypeMessageTimer()},methods:{async setTypeMessageTimer(){this.timer=setInterval((()=>{this.textCount+=1,this.textCount>=this.message.length&&clearInterval(this.timer)}),this.delayMilliSencond)}}},A=L,P=Object(h["a"])(A,I,T,!1,null,null,null),D=P.exports,O={name:"GameMessageList",components:{MessageBoard:D},computed:o()(o()(o()({},Object(c["e"])("game",["messageList"])),Object(c["c"])("game",["isStarted","isHost"])),{},{messageBoaredText(){return this.messageList[0]},hasNextMessage(){return this.messageList.length>1}}),methods:o()(o()({},Object(c["d"])("game",["shiftMessage"])),{},{handleNextMessage(){this.hasNextMessage&&this.shiftMessage()}})},Q=O,G=(a("ab46"),a("0016")),R=Object(h["a"])(Q,k,_,!1,null,"7ea1dfa2",null),j=R.exports;S()(R,"components",{QIcon:G["a"]});var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShowStartButton?a("q-btn",{attrs:{rounded:"",color:"positive",glossy:"",label:"遊戲開始"},on:{click:e.handleStart}}):e.isShowSelectTaskTeamButton?a("q-btn",{attrs:{padding:"0",round:""},on:{click:e.assignTaskTeam}},[a("q-avatar",{attrs:{size:"65px"}},[a("img",{attrs:{src:"task.jpg"}})])],1):e.isShowAssignRevealPlayerButton?a("q-btn",{attrs:{padding:"0",round:""},on:{click:e.assignRevealPlayer}},[a("q-avatar",{attrs:{size:"65px"}},[a("img",{attrs:{src:"god.jpg"}})])],1):e.isShowVoteButton?a("div",{staticClass:"row no-wrap"},[a("q-btn",{staticClass:"q-mr-md",attrs:{rounded:"",color:"positive",glossy:"",label:"成功"},on:{click:function(t){return e.handleVote(!0)}}}),a("q-btn",{attrs:{rounded:"",color:"negative",glossy:"",label:"失敗"},on:{click:function(t){return e.handleVote(!1)}}})],1):e.isShowApproveButton?a("div",{staticClass:"row no-wrap"},[a("q-btn",{staticClass:"q-mr-md",attrs:{rounded:"",color:"positive",glossy:"",label:"贊成"},on:{click:function(t){return e.handleApprove(!0)}}}),a("q-btn",{attrs:{rounded:"",color:"negative",glossy:"",label:"反對"},on:{click:function(t){return e.handleApprove(!1)}}})],1):e.isShowGodStatementButton?a("div",{staticClass:"row no-wrap"},[a("q-btn",{staticClass:"q-mr-md",attrs:{rounded:"",color:"positive",glossy:"",label:"他是忠臣"},on:{click:function(t){return e.assignGodState(!0)}}}),a("q-btn",{attrs:{rounded:"",color:"negative",glossy:"",label:"他是爪牙"},on:{click:function(t){return e.assignGodState(!1)}}})],1):e.isShowAssignKillPlayerButton?a("q-btn",{attrs:{padding:"0",round:""},on:{click:e.assignKillPlayer}},[a("q-avatar",{attrs:{size:"65px"}},[a("img",{attrs:{src:"kill.jpg"}})])],1):e._e()},N=[],$=a("6ffa"),z={name:"GameOperateButton",computed:o()(o()(o()({},Object(c["e"])("game",["status","teamSize","revealPlayer","selectedTaskTeamList","killPlayer"])),Object(c["c"])("game",["isHost","isStarted","isValidGamePlayerCount"])),{},{isShowStartButton(){return this.status===$["a"].WAIT_START&&this.isHost&&!this.isStarted},isShowSelectTaskTeamButton(){return this.status===$["a"].SELECT_TASK_PLAYER},isShowVoteButton(){return this.status===$["a"].VOTE},isShowApproveButton(){return this.status===$["a"].APPROVE},isShowGodStatementButton(){return this.status===$["a"].ASSIGN_GOD_STATEMENT},isShowAssignRevealPlayerButton(){return this.status===$["a"].SELECT_REVEAL_PLAYER},isShowAssignKillPlayerButton(){return this.status===$["a"].SELECT_KILL_PLAYER}}),methods:o()(o()({},Object(c["b"])("game",["startGameAction","assignTaskTeamAction","voteTaskAction","approveAction","assignGodStatementAction","assignRevealPlayerAction","assignKillPlayerAction"])),{},{handleStart(){!1!==this.isValidGamePlayerCount?this.startGameAction():this.$q.notify({message:"玩家人數不符"})},assignTaskTeam(){this.selectedTaskTeamList.length===this.teamSize?this.assignTaskTeamAction():this.$q.notify({message:`請選擇 ${this.teamSize} 位出任務玩家`})},assignRevealPlayer(){""!==this.revealPlayer?this.assignRevealPlayerAction():this.$q.notify({message:"請選擇檢視玩家"})},handleVote(e){this.voteTaskAction(e)},handleApprove(e){this.approveAction(e)},assignGodState(e){this.assignGodStatementAction(e)},assignKillPlayer(){""!==this.killPlayer?this.assignKillPlayerAction():this.$q.notify({message:"請選擇刺殺玩家"})}})},B=z,M=a("9c40"),K=Object(h["a"])(B,E,N,!1,null,null,null),V=K.exports;S()(K,"components",{QBtn:M["a"],QAvatar:y["a"]});var H={name:"GameFooter",components:{GameMessageList:j,GameOperateButton:V}},F=H,U=a("7ff0"),J=Object(h["a"])(F,C,x,!1,null,null,null),Y=J.exports;S()(J,"components",{QFooter:U["a"],QItem:u["a"],QItemSection:g["a"]});var X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row q-pt-md q-col-gutter-sm"},e._l(e.playerList,(function(e,t){return a("div",{key:t,staticClass:"col-4"},[a("PlayerListItem",{attrs:{player:e}})],1)})),0)},W=[],Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-black column items-center q-pt-sm q-px-sm relative-position",class:"bd-p"+e.order,staticStyle:{"border-radius":"10px"},on:{click:e.handlePlayerClick}},[a("q-img",{staticStyle:{"border-radius":"10px","max-width":"80px","max-height":"112px"},attrs:{src:e.roleImageUrl,basic:"",width:"100%",height:"112px","no-default-spinner":""}}),a("div",{staticClass:"text-bold ellipsis text-white fz-sm text-center full-width"},[e._v("\n    "+e._s(e.player.name)+"\n  ")]),a("q-badge",{directives:[{name:"show",rawName:"v-show",value:e.isShowLeaderSign,expression:"isShowLeaderSign"}],staticClass:"q-pa-none bg-transparent",staticStyle:{left:"-3px"},attrs:{floating:"",rounded:""}},[a("q-avatar",{attrs:{size:"40px"}},[a("img",{attrs:{src:"crown.jpg"}})])],1),a("q-badge",{directives:[{name:"show",rawName:"v-show",value:e.isShowTaskTeamSign,expression:"isShowTaskTeamSign"}],staticClass:"q-pa-none bg-transparent",attrs:{floating:"",rounded:""}},[a("q-avatar",{attrs:{size:"40px"}},[a("img",{attrs:{src:"task.jpg"}})])],1),a("q-badge",{directives:[{name:"show",rawName:"v-show",value:e.isShowGodSign,expression:"isShowGodSign"}],staticClass:"q-pa-none bg-transparent absolute-left",attrs:{floating:"",rounded:""}},[a("q-avatar",{attrs:{size:"40px"}},[a("img",{attrs:{src:"god.jpg"}})])],1),a("q-badge",{directives:[{name:"show",rawName:"v-show",value:e.isShowKillSign,expression:"isShowKillSign"}],staticClass:"q-pa-none bg-transparent absolute",attrs:{floating:"",rounded:""}},[a("q-avatar",{attrs:{size:"40px"}},[a("img",{attrs:{src:"kill.jpg"}})])],1)],1)},ee=[],te=a("0373"),ae={name:"PlayerListItem",props:{player:{type:Object,required:!0}},computed:o()(o()(o()({},Object(c["c"])("game",["isLeader","isSelectedTaskTeamPlayer","isTaskTeamPlayer","playerOrder"])),Object(c["e"])("game",["status","revealPlayer","killPlayer","revealedPlayerList"])),{},{order(){return this.playerOrder(this.player.name)},playerName(){return this.player.name},isShowLeaderSign(){return this.isLeader(this.player.name)},isShowKillSign(){return this.killPlayer===this.player.name},isShowTaskTeamSign(){const e=this.player.name;return this.isSelectedTaskTeamPlayer(e)||this.isTaskTeamPlayer(e)},isShowGodSign(){return this.playerName===this.revealPlayer},roleImageUrl(){return Object(te["e"])(this.player.role)},hasReveal(){return this.revealedPlayerList.includes(this.playerName)}}),methods:o()(o()({},Object(c["d"])("game",["addSelectedTaskTeamPlayer","removeSelectedTaskTeamPlayer","setRevealPlayer","setKillPlayer"])),{},{handlePlayerClick(){this.status!==$["a"].SELECT_TASK_PLAYER?this.status!==$["a"].SELECT_REVEAL_PLAYER?this.status===$["a"].SELECT_KILL_PLAYER&&this.handleSelectKillPlayer():this.handleSelectRevealPlayer():this.handleSelectTaskTeam()},handleSelectTaskTeam(){this.isSelectedTaskTeamPlayer(this.playerName)?this.removeSelectedTaskTeamPlayer(this.playerName):this.addSelectedTaskTeamPlayer(this.playerName)},handleSelectRevealPlayer(){this.hasReveal?this.$q.notify({message:"無法選擇檢視過的玩家"}):this.setRevealPlayer(this.playerName)},handleSelectKillPlayer(){""===this.killPlayer?this.setKillPlayer(this.playerName):this.setKillPlayer("")}})},se=ae,ie=a("58a81"),ne=Object(h["a"])(se,Z,ee,!1,null,null,null),oe=ne.exports;S()(ne,"components",{QImg:v["a"],QBadge:ie["a"],QAvatar:y["a"]});var re={name:"PlayerList",components:{PlayerListItem:oe},computed:o()({},Object(c["e"])("game",["playerList"]))},le=re,ce=Object(h["a"])(le,X,W,!1,null,null,null),me=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.isShowGameDialog,callback:function(t){e.isShowGameDialog=t},expression:"isShowGameDialog"}},[a("q-card",{attrs:{dark:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("\n        "+e._s(e.message)+"\n      ")])])],1)],1)},he=[],pe={name:"GameDialog",computed:o()(o()(o()({},Object(c["c"])("game",["isShowGameDialog"])),Object(c["e"])("game",["offlinePlayerList"])),{},{message(){const e=this.offlinePlayerList.join(", ");return`${e} 離開位置去上廁所 !!`}})},ue=pe,ge=a("24e8"),ve=a("f09f"),be=a("a370"),ye=Object(h["a"])(ue,de,he,!1,null,null,null),we=ye.exports;S()(ye,"components",{QDialog:ge["a"],QCard:ve["a"],QCardSection:be["a"]});var Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.isShowLoginDialog,callback:function(t){e.isShowLoginDialog=t},expression:"isShowLoginDialog"}},[a("q-card",{attrs:{bordered:"",dark:""}},[a("q-card-section",{staticClass:"q-pb-sm"},[a("q-input",{ref:"player",attrs:{dark:"","input-class":"text-center text-primary fz-md",rules:[function(e){return!!e||"請輸入暱稱"},function(e){return e.length<=8||"字數限制 8"}],placeholder:"遊戲暱稱"},model:{value:e.player,callback:function(t){e.player=t},expression:"player"}},[a("q-menu",{attrs:{fit:"",dark:"",target:e.$refs.player,"content-class":""}},[a("q-list",e._l(e.recommandNames,(function(t,s){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:s,attrs:{clickable:""},on:{click:function(a){return e.setPlayer(t)}}},[a("q-item-section",{staticClass:"text-center fz-sm"},[e._v("\n                "+e._s(t)+"\n              ")])],1)})),1)],1)],1)],1),a("q-card-actions",{staticClass:"q-pb-md",attrs:{align:"center"}},[a("q-btn",{staticClass:"fz-md",attrs:{outline:"",push:"",rounded:"",loading:e.isConnectingGame||e.isFetchingHost,color:e.buttonColor,padding:"sm md",label:e.buttonText},on:{click:e.handleClick}})],1)],1)],1)},fe=[];const qe=async(e=1)=>new Promise((t=>{setTimeout(t,1e3*e)}));var Ce=a("34c9"),xe={name:"LoginDialog",data(){return{player:"",roomId:"",host:"",isFetchingHost:!1,isButtonAvailable:!0,options:[],recommandNames:["金城武","黎明","劉德華","梁朝偉","金貝貝","阿土伯","孫小美","小蝦米","山下智囧","9527"]}},computed:o()(o()(o()({},Object(c["c"])("game",["isShowLoginDialog"])),Object(c["e"])("game",["isConnectingGame"])),{},{buttonText(){const{roomId:e,host:t}=this;return e&&t?`加入${this.host}的遊戲`:e&&!t?`遊戲(${e}) 不存在 !`:"建立遊戲"},buttonColor(){const{roomId:e,host:t}=this;return e&&t?"primary":e&&!t?"negative":"primary"},isShowButton(){return""!==this.player},isShowRoomIdInput(){return!!this.roomId}}),async mounted(){const{roomId:e}=this.$route.params,t=this.$q.localStorage.getItem("player")||"";this.player=t,e&&(this.roomId=e,this.host=await this.fetchGameHostName(e))},methods:o()(o()(o()({},Object(c["d"])("game",["setRoomId","setUser","setIsShowInviteDialog"])),Object(c["b"])("game",["createGameAction","joinGameAction","handleJoinGameAction"])),{},{async handleCreate(){const e=async e=>{await this.$router.push({path:`/${e}`}).catch((()=>{})),this.setIsShowInviteDialog(!0)},t=()=>{this.$q.notify({message:"遊戲連線錯誤"})};await this.createGameAction({player:this.player,handleSuccess:e,handleError:t})},async handleJoin(){const e=e=>{this.$router.push({path:`/${e}`}).catch((()=>{}))},t=(e="遊戲連線錯誤")=>{this.$q.notify({message:e})};await this.handleJoinGameAction({player:this.player,roomId:this.roomId,handleSuccess:e,handleError:t})},async handleClick(){""!==this.player?!1!==this.isButtonAvailable?(this.$q.localStorage.set("player",this.player),this.roomId&&this.host?(this.setClickTimer(),await this.handleJoin()):this.roomId?this.roomId="":(this.setClickTimer(),await this.handleCreate())):this.$q.notify({message:"請稍候在試！"}):this.$q.notify({message:"請輸入遊戲暱稱"})},async setClickTimer(){this.isButtonAvailable=!1,await qe(3),this.isButtonAvailable=!0},async fetchGameHostName(e){try{this.isFetchingHost=!0;const t=await Object(Ce["b"])(e),a=t.data.host||"";return a}catch(t){return""}finally{this.isFetchingHost=!1}},filterFn(e,t){t((()=>{this.options=this.recommandNames.filter((t=>t.includes(e)))}))},setPlayer(e){this.player=e}})},ke=xe,_e=a("27f9"),Ie=a("4e73"),Te=a("1c1c"),Le=a("4b7e"),Ae=a("7f67"),Pe=Object(h["a"])(ke,Se,fe,!1,null,null,null),De=Pe.exports;S()(Pe,"components",{QDialog:ge["a"],QCard:ve["a"],QCardSection:be["a"],QInput:_e["a"],QMenu:Ie["a"],QList:Te["a"],QItem:u["a"],QItemSection:g["a"],QCardActions:Le["a"],QBtn:M["a"]}),S()(Pe,"directives",{ClosePopup:Ae["a"]});var Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.isShowConnectingDialog,callback:function(t){e.isShowConnectingDialog=t},expression:"isShowConnectingDialog"}},[a("q-card",{attrs:{dark:"",bordered:""}},[e.isShowReconnectingText?a("q-card-section",{staticClass:"row items-center"},[a("div",{staticClass:"text-h6 q-px-md"},[e._v("\n        遊戲連線中\n      ")]),a("q-spinner-dots",{attrs:{color:"primary",size:"2em"}})],1):a("q-card-section",{staticClass:"row items-center"},[a("q-icon",{attrs:{name:"error_outline",size:"2em",color:"primary"}}),a("div",{staticClass:"text-h6 q-px-md"},[e._v("\n        連線失敗\n      ")]),a("q-btn",{attrs:{label:"離開",flat:"",color:"primary",unelevated:""},on:{click:e.handleLaeveGame}})],1)],1)],1)},Qe=[],Ge={name:"GameConnectingDialog",computed:o()(o()(o()({},Object(c["c"])("game",["isShowConnectingDialog"])),Object(c["e"])("game",["reconnectCount"])),{},{isShowReconnectingText(){return this.reconnectCount<=3}}),methods:{handleLaeveGame(){this.$router.replace("/").then((()=>{window.location.reload()})).catch((()=>{window.location.reload()}))}}},Re=Ge,je=a("8380"),Ee=Object(h["a"])(Re,Oe,Qe,!1,null,null,null),Ne=Ee.exports;S()(Ee,"components",{QDialog:ge["a"],QCard:ve["a"],QCardSection:be["a"],QSpinnerDots:je["a"],QIcon:G["a"],QBtn:M["a"]});var $e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:"isShowDialog"}},[a("q-card",{ref:"card",staticClass:"column no-wrap",staticStyle:{"max-width":"760px"}},[a("q-card-section",{staticClass:"row justify-between items-center bg-white q-pb-none",staticStyle:{position:"sticky",top:"0","z-index":"10"}},[a("q-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"role",label:"角色介紹"}}),a("q-tab",{attrs:{name:"rule",label:"勝利條件"}})],1),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",round:"",push:"",color:"black","text-color":"white",padding:"4px",size:"md"}})],1),a("q-tab-panels",{staticClass:"col",attrs:{animated:"",swipeable:"","keep-alive":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{staticClass:"scroll overflow-auto",attrs:{name:"role"}},[a("GameRoleList")],1),a("q-tab-panel",{staticClass:"scroll overflow-auto",attrs:{name:"rule"}},[a("GameRule")],1)],1)],1)],1)},ze=[],Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-list",{attrs:{separator:""}},e._l(e.gameRoleList,(function(t,s){return a("q-item",{key:s},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{size:"100px"}},[a("img",{staticStyle:{"object-fit":"cover"},attrs:{src:t.image}})])],1),a("q-item-section",{attrs:{top:""}},[a("q-item-label",{staticClass:"text-bold fz-lg q-py-xs",attrs:{header:""}},[e._v("\n        "+e._s(t.name)+"\n      ")]),a("q-item-label",{staticClass:"fz-md"},[e._v("\n        "+e._s(t.description)+"\n      ")])],1)],1)})),1)},Me=[],Ke={name:"GameRoleList",data(){return{gameRoleList:[{image:te["c"].MERLIN,name:te["d"].MERLIN,description:te["b"].MERLIN},{image:te["c"].PERCIVAL,name:te["d"].PERCIVAL,description:te["b"].PERCIVAL},{image:te["c"].SERVANT,name:te["d"].SERVANT,description:te["b"].SERVANT},{image:te["c"].MORDRED,name:te["d"].MORDRED,description:te["b"].MORDRED},{image:te["c"].ASSASSIN,name:te["d"].ASSASSIN,description:te["b"].ASSASSIN},{image:te["c"].MORGANA,name:te["d"].MORGANA,description:te["b"].MORGANA},{image:te["c"].OBERON,name:te["d"].OBERON,description:te["b"].OBERON},{image:te["c"].MINION,name:te["d"].MINION,description:te["b"].MINION},{image:te["c"].GOD,name:te["d"].GOD,description:te["b"].GOD}]}}},Ve=Ke,He=Object(h["a"])(Ve,Be,Me,!1,null,null,null),Fe=He.exports;S()(He,"components",{QList:Te["a"],QItem:u["a"],QItemSection:g["a"],QAvatar:y["a"],QItemLabel:b["a"]});var Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fz-sm fit"},[a("div",{staticClass:"text-bold fz-md"},[e._v("\n    正義陣營獲勝\n  ")]),a("ul",{staticStyle:{"list-style-type":"disc"}},[a("li",[e._v("\n      任務成功3次，且梅林沒有被刺殺。\n      ("),a("q-avatar",{attrs:{size:"30px",color:"black"}},[a("img",{attrs:{src:"score_success.jpg"}})]),e._v("\n      X 3)\n    ")],1)]),a("div",{staticClass:"text-bold fz-md"},[e._v("\n    邪惡陣營獲勝\n  ")]),a("ul",{staticStyle:{"list-style-type":"disc"}},[a("li",[e._v("\n      任務失敗3次。\n      ("),a("q-avatar",{attrs:{size:"30px",color:"black"}},[a("img",{attrs:{src:"score_fail.jpg"}})]),e._v("\n      X 3)\n    ")],1),a("li",[e._v("\n      領袖選擇出任務成員時，連續投票失敗5次。\n      ("),a("q-avatar",{attrs:{size:"30px",color:"black"}},[a("img",{attrs:{src:"unapprove.jpg"}})]),e._v(" X 5)\n    ")],1),a("li",[e._v("\n      (任務成功3次後)刺殺梅林成功。\n      "),a("q-avatar",{attrs:{size:"30px",color:"black"}},[a("img",{attrs:{src:"kill.jpg"}})])],1),a("q-icon")],1),a("div",{staticClass:"text-bold fz-md"},[e._v("\n    湖中女神\n  ")]),a("ul",{staticStyle:{"list-style-type":"disc"}},[a("li",[e._v("\n      第一次湖中女神指示物為第二位玩家擁有。\n      "),a("q-avatar",{attrs:{size:"30px",color:"black"}},[a("img",{attrs:{src:"god.jpg"}})])],1),a("li",[e._v("\n      第2、3、4回合，出完任務後才可以使用湖中女神能力。\n    ")]),a("li",[e._v("\n      持有湖中女神指示物的玩家選擇要檢視的對象，但是不可以選擇之前被湖中女神能力看過的玩家。\n    ")]),a("li",[e._v("\n      被檢視的玩家將會成為新的湖中女神指示物持有者。\n    ")]),a("q-icon")],1)])},Je=[],Ye={name:"GameRule"},Xe=Ye,We=Object(h["a"])(Xe,Ue,Je,!1,null,null,null),Ze=We.exports;S()(We,"components",{QAvatar:y["a"],QIcon:G["a"]});var et={name:"GameRoleDialog",components:{GameRoleList:Fe,GameRule:Ze},data(){return{isShowDialog:!1,tab:"role"}},methods:{showDialog(){this.isShowDialog=!0}}},tt=et,at=a("429b"),st=a("7460"),it=a("adad"),nt=a("823b"),ot=Object(h["a"])(tt,$e,ze,!1,null,null,null),rt=ot.exports;S()(ot,"components",{QDialog:ge["a"],QCard:ve["a"],QCardSection:be["a"],QTabs:at["a"],QTab:st["a"],QBtn:M["a"],QTabPanels:it["a"],QTabPanel:nt["a"]}),S()(ot,"directives",{ClosePopup:Ae["a"]});var lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down",maximized:""},model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:"isShowDialog"}},[a("q-card",{ref:"card",staticClass:"relative-position q-pb-md",staticStyle:{"max-width":"550px",height:"auto"}},[a("q-card-section",{staticClass:"text-h6 text-bold text-center"},[e._v("\n      快速邀請朋友加入遊戲\n    ")]),a("q-card-section",{staticClass:"flex flex-center q-pt-none"},[a("q-img",{staticStyle:{"max-width":"300px"},attrs:{width:"100%",src:e.qrCodeUrl}})],1),a("q-card-actions",{staticClass:"q-px-lg",attrs:{align:"center"}},[a("q-btn",{staticClass:"full-width",attrs:{label:"邀請連結",color:"primary",outline:!e.isCopied},on:{click:e.handleCopyLinkClick}})],1),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ma-md absolute-top-right",attrs:{icon:"close",round:"",push:"",color:"black","text-color":"white",padding:"4px",size:"md"}})],1)],1)},ct=[],mt=a("d055"),dt=a.n(mt),ht=a("cdde"),pt={name:"InviteDialog",data(){return{qrCodeUrl:"",isCopied:!1}},computed:o()(o()({},Object(c["e"])("game",["roomId","isShowInviteDialog"])),{},{isShowDialog:{get(){return this.isShowInviteDialog},set(e){this.setIsShowInviteDialog(e)}},link(){return`https://avalonclient.herokuapp.com/${this.roomId}`}}),async updated(){await this.setQrCodeUrl()},async mounted(){await this.setQrCodeUrl()},methods:o()(o()({},Object(c["d"])("game",["setIsShowInviteDialog"])),{},{showDialog(){this.setIsShowInviteDialog(!0)},async setQrCodeUrl(){const e={errorCorrectionLevel:"H",type:"image/jpeg",quality:1,margin:1};this.qrCodeUrl=await dt.a.toDataURL(this.link,e)},handleCopyLinkClick(){Object(ht["a"])(this.link).then((()=>{this.isCopied=!0})).catch((()=>{this.$q.notify({message:"複製失敗"})}))}})},ut=pt,gt=Object(h["a"])(ut,lt,ct,!1,null,null,null),vt=gt.exports;S()(gt,"components",{QDialog:ge["a"],QCard:ve["a"],QCardSection:be["a"],QImg:v["a"],QCardActions:Le["a"],QBtn:M["a"]}),S()(gt,"directives",{ClosePopup:Ae["a"]});var bt={name:"GameLayout",components:{GameHeader:q,GameFooter:Y,PlayerList:me,GameDialog:we,LoginDialog:De,GameConnectingDialog:Ne,GameRoleDialog:rt,InviteDialog:vt},data(){return{confirm:!1}},computed:o()(o()({},Object(c["e"])("game",["isGameOver"])),{},{link(){return"https://avalonclient.herokuapp.com"+this.$route.fullPath}}),async preFetch({store:e,currentRoute:t}){},methods:o()(o()({},Object(c["d"])("game",["setIsShowInviteDialog"])),{},{handleQuestionclick(){this.$refs.gameRoleDialog.showDialog()},handleInviteclick(){this.setIsShowInviteDialog(!0)},showLeaveDialog(){this.confirm=!0},handleLaeveGame(){this.$router.replace("/").then((()=>{window.location.reload()})).catch((()=>{window.location.reload()}))},myTweak(e){return{minHeight:e?`calc(100vh - ${e}px)`:"100vh"}}}),meta(){return{title:"阿瓦隆 - 陣營對抗桌遊",meta:{description:{name:"description",content:"阿瓦隆(Avalon)是很熱門的陣營類桌遊，已經推出了好幾年，一直受到許多玩家熱愛。遊戲中玩家分成兩大陣營，每個陣營內有能力者和普通角色，玩家要通過邏輯推理和對話來試探彼此的陣營。"},keywords:{name:"keywords",content:"avalon 桌遊 阿瓦隆"},equiv:{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"},ogTitle:{name:"og:title",content:"阿瓦隆 - 陣營對抗桌遊"},ogDescription:{name:"og:description",content:"阿瓦隆(Avalon)是很熱門的陣營類桌遊，已經推出了好幾年，一直受到許多玩家熱愛。遊戲中玩家分成兩大陣營，每個陣營內有能力者和普通角色，玩家要通過邏輯推理和對話來試探彼此的陣營。"},ogImage:{name:"og:image",content:"https://avalonclient.herokuapp.com/assassin.jpg"},ogUrl:{name:"og:url",content:this.link}}}}},yt=bt,wt=a("4d5a"),St=a("09e3"),ft=a("9989"),qt=a("de5e"),Ct=Object(h["a"])(yt,s,i,!1,null,null,null);t["default"]=Ct.exports;S()(Ct,"components",{QLayout:wt["a"],QPageContainer:St["a"],QPage:ft["a"],QDialog:ge["a"],QCard:ve["a"],QCardSection:be["a"],QCardActions:Le["a"],QBtn:M["a"],QPageSticky:qt["a"],QIcon:G["a"]}),S()(Ct,"directives",{ClosePopup:Ae["a"]})}}]);